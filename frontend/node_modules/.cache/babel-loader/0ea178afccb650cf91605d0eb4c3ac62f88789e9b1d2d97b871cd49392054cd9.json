{"ast":null,"code":"var _jsxFileName = \"/Users/jonnyisenberg/Desktop/MM_BOT/trading_bot_system/frontend/src/components/RiskMonitoring.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Shield, TrendingUp, TrendingDown, AlertTriangle, Activity, DollarSign, BarChart3, RefreshCw, Settings, Download, Clock, ChevronDown, ChevronRight } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RiskMonitoring = () => {\n  _s();\n  var _positionData$summary;\n  const [accounts, setAccounts] = useState([]);\n  const [selectedAccount, setSelectedAccount] = useState('');\n  const [positionData, setPositionData] = useState({});\n  const [riskMetrics, setRiskMetrics] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [lastUpdate, setLastUpdate] = useState(null);\n  const [timeRanges, setTimeRanges] = useState({});\n  const [autoRefresh, setAutoRefresh] = useState(false);\n  const [wsConnected, setWsConnected] = useState(false);\n  const [wsConnection, setWsConnection] = useState(null);\n  const [activeSymbols, setActiveSymbols] = useState([]);\n  const [error, setError] = useState(null);\n  const [syncStatus, setSyncStatus] = useState({});\n  const [wsStatus, setWsStatus] = useState('disconnected');\n  const [expandedPositions, setExpandedPositions] = useState(new Set());\n\n  // Helper function to safely convert string/number to number\n  const safeNumber = (value, defaultValue = 0) => {\n    if (value === null || value === undefined || value === '') return defaultValue;\n    const num = typeof value === 'string' ? parseFloat(value) : Number(value);\n    return isNaN(num) ? defaultValue : num;\n  };\n\n  // Helper function to format currency\n  const formatCurrency = value => {\n    return safeNumber(value).toFixed(2);\n  };\n\n  // Helper function to format number with decimals\n  const formatNumber = (value, decimals = 4) => {\n    return safeNumber(value).toFixed(decimals);\n  };\n\n  // Initialize time ranges for each account\n  const initializeTimeRanges = accountList => {\n    const ranges = {};\n    accountList.forEach(account => {\n      ranges[account.name] = {\n        startTime: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().slice(0, 16),\n        endTime: new Date().toISOString().slice(0, 16)\n      };\n    });\n    setTimeRanges(ranges);\n  };\n\n  // Load accounts data\n  const loadAccounts = async () => {\n    try {\n      setError(null);\n      const response = await fetch('/api/system/accounts');\n      if (!response.ok) {\n        throw new Error(`Failed to load accounts: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('Accounts loaded:', data);\n      setAccounts(data.accounts || []);\n\n      // Initialize time ranges for all accounts\n      const ranges = {};\n      data.accounts.forEach(account => {\n        ranges[account.name] = {\n          startTime: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().slice(0, 16),\n          endTime: new Date().toISOString().slice(0, 16)\n        };\n      });\n      setTimeRanges(ranges);\n\n      // Auto-select first account and get its symbols\n      if (data.accounts && data.accounts.length > 0) {\n        const firstAccount = data.accounts[0];\n        setSelectedAccount(firstAccount.name);\n\n        // Set active symbols from the account\n        const symbols = firstAccount.active_symbols || ['BERA/USDT'];\n        setActiveSymbols(symbols);\n        console.log('Active symbols from account:', symbols);\n      }\n    } catch (err) {\n      console.error('Error loading accounts:', err);\n      setError(err.message);\n      // Fallback symbols if accounts fail to load\n      setActiveSymbols(['BERA/USDT']);\n    }\n  };\n\n  // Fetch position data\n  const fetchPositionData = async () => {\n    setLoading(true);\n    try {\n      const endpoints = ['/api/positions/summary', '/api/positions/net', '/api/positions/export/json'];\n      const responses = await Promise.all(endpoints.map(endpoint => fetch(endpoint).catch(err => {\n        console.warn(`Failed to fetch ${endpoint}:`, err);\n        return {\n          ok: false,\n          json: () => Promise.resolve({})\n        };\n      })));\n      const responseData = await Promise.all(responses.map(r => r.ok ? r.json() : {}));\n      const [summaryData, netData, exportData] = responseData;\n      setPositionData({\n        summary: summaryData.summary || {},\n        netPositions: netData.net_positions || {},\n        detailed: exportData.detailed_positions || []\n      });\n      calculateRiskMetrics(summaryData.summary || {}, netData.net_positions || {});\n      setLastUpdate(new Date());\n    } catch (error) {\n      console.error('Error fetching position data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Calculate risk metrics\n  const calculateRiskMetrics = (summary, netPositions) => {\n    // Provide safe defaults for summary\n    const safeSummary = {\n      long_value: 0,\n      short_value: 0,\n      net_exposure: 0,\n      positions_by_exchange: {},\n      ...summary\n    };\n\n    // Provide safe defaults for netPositions\n    const safeNetPositions = netPositions || {};\n    const metrics = {\n      totalExposure: safeSummary.long_value + safeSummary.short_value,\n      netExposure: safeSummary.net_exposure,\n      longShortRatio: safeSummary.short_value > 0 ? safeSummary.long_value / safeSummary.short_value : 0,\n      portfolioDiversification: Object.keys(safeNetPositions).length,\n      riskScore: calculateRiskScore(safeSummary, safeNetPositions),\n      exchangeDistribution: safeSummary.positions_by_exchange,\n      symbolConcentration: calculateSymbolConcentration(safeNetPositions)\n    };\n    setRiskMetrics(metrics);\n  };\n  const calculateRiskScore = (summary, netPositions) => {\n    let score = 0;\n\n    // Exposure risk (safe access)\n    const netExposure = Math.abs(summary.net_exposure || 0);\n    if (netExposure > 10000) score += 30;else if (netExposure > 5000) score += 20;else score += 10;\n\n    // Concentration risk (safe access)\n    const positionValues = Object.values(netPositions || {}).map(p => Math.abs(p.value || 0));\n    const maxPosition = positionValues.length > 0 ? Math.max(...positionValues) : 0;\n    const totalExposure = (summary.long_value || 0) + (summary.short_value || 0);\n    const concentrationRatio = totalExposure > 0 ? maxPosition / totalExposure : 0;\n    if (concentrationRatio > 0.5) score += 40;else if (concentrationRatio > 0.3) score += 25;else score += 10;\n\n    // Exchange diversification (safe access)\n    const exchangeCount = Object.keys(summary.positions_by_exchange || {}).length;\n    if (exchangeCount < 3) score += 30;else if (exchangeCount < 5) score += 20;else score += 10;\n    return Math.min(score, 100);\n  };\n  const calculateSymbolConcentration = netPositions => {\n    const safePositions = netPositions || {};\n    const totalValue = Object.values(safePositions).reduce((sum, pos) => sum + Math.abs(pos.value || 0), 0);\n    const concentrations = {};\n    Object.entries(safePositions).forEach(([symbol, pos]) => {\n      concentrations[symbol] = totalValue > 0 ? Math.abs(pos.value || 0) / totalValue * 100 : 0;\n    });\n    return concentrations;\n  };\n\n  // Update time range for account\n  const updateTimeRange = (accountName, field, value) => {\n    setTimeRanges(prev => ({\n      ...prev,\n      [accountName]: {\n        ...prev[accountName],\n        [field]: value\n      }\n    }));\n  };\n\n  // Sync trades for time range\n  const handleSyncTrades = async () => {\n    if (!selectedAccount || !timeRanges[selectedAccount].startTime || !timeRanges[selectedAccount].endTime) {\n      setError('Please select an account and set both start and end times');\n      return;\n    }\n    if (!activeSymbols || activeSymbols.length === 0) {\n      setError('No trading symbols configured for this account');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    setSyncStatus({\n      status: 'running',\n      message: 'Starting trade synchronization...'\n    });\n    try {\n      const response = await fetch('/api/system/sync-trades', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          account: selectedAccount,\n          start_time: timeRanges[selectedAccount].startTime,\n          end_time: timeRanges[selectedAccount].endTime,\n          symbols: activeSymbols // Use symbols from the selected account\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || `Sync failed: ${response.status}`);\n      }\n      const result = await response.json();\n      console.log('Sync result:', result);\n      setSyncStatus({\n        status: 'completed',\n        message: result.message || 'Trade synchronization completed',\n        summary: result.summary,\n        results: result.results\n      });\n\n      // Reload positions after successful sync\n      await fetchPositionData();\n    } catch (err) {\n      console.error('Error syncing trades:', err);\n      setError(err.message);\n      setSyncStatus({\n        status: 'failed',\n        message: `Sync failed: ${err.message}`\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // WebSocket connection for real-time updates\n  useEffect(() => {\n    if (autoRefresh) {\n      const ws = new WebSocket('ws://localhost:8000/ws/risk-monitoring');\n      ws.onopen = () => {\n        console.log('WebSocket connected for risk monitoring');\n        setWsConnected(true);\n        setWsConnection(ws);\n      };\n      ws.onmessage = event => {\n        try {\n          const message = JSON.parse(event.data);\n          console.log('WebSocket message received:', message);\n          if (message.type === 'initial_data' || message.type === 'position_update') {\n            const data = message.data;\n\n            // Update position data with safe defaults\n            setPositionData({\n              summary: data.summary || {},\n              netPositions: data.net_positions || {},\n              detailed: data.detailed_positions || []\n            });\n\n            // Update risk metrics\n            if (data.risk_metrics) {\n              setRiskMetrics(data.risk_metrics);\n            } else if (data.summary && data.net_positions) {\n              calculateRiskMetrics(data.summary, data.net_positions);\n            }\n            setLastUpdate(new Date());\n          }\n          if (message.type === 'trade_update') {\n            console.log('Trade update received:', message);\n            // Show a brief notification for trade updates\n            if (message.data && message.data.symbol) {\n              console.log(`ðŸ”„ Trade executed: ${message.data.symbol} ${message.data.side} ${message.data.amount}`);\n            }\n          }\n          if (message.type === 'position_change') {\n            console.log('Position change received:', message);\n            // Refresh position data when positions change\n            fetchPositionData();\n          }\n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n        }\n      };\n      ws.onclose = () => {\n        console.log('WebSocket disconnected');\n        setWsConnected(false);\n      };\n      ws.onerror = error => {\n        console.error('WebSocket error:', error);\n        setWsConnected(false);\n      };\n\n      // Cleanup function\n      return () => {\n        if (ws.readyState === WebSocket.OPEN) {\n          ws.close();\n        }\n      };\n    }\n  }, [autoRefresh]);\n\n  // Initial load\n  useEffect(() => {\n    loadAccounts();\n    fetchPositionData();\n  }, []);\n  const getRiskColor = score => {\n    if (score <= 30) return 'text-green-500';\n    if (score <= 60) return 'text-yellow-500';\n    return 'text-red-500';\n  };\n  const getRiskBgColor = score => {\n    if (score <= 30) return 'bg-green-500/10 border-green-500/20';\n    if (score <= 60) return 'bg-yellow-500/10 border-yellow-500/20';\n    return 'bg-red-500/10 border-red-500/20';\n  };\n  const getRiskLabel = score => {\n    if (score <= 30) return 'Low Risk';\n    if (score <= 60) return 'Medium Risk';\n    return 'High Risk';\n  };\n\n  // Toggle position expansion\n  const togglePositionExpansion = symbol => {\n    const newExpanded = new Set(expandedPositions);\n    if (newExpanded.has(symbol)) {\n      newExpanded.delete(symbol);\n    } else {\n      newExpanded.add(symbol);\n    }\n    setExpandedPositions(newExpanded);\n  };\n\n  // Get detailed positions for a symbol\n  const getDetailedPositionsForSymbol = symbol => {\n    return (positionData.detailed || []).filter(pos => pos.symbol === symbol);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(Shield, {\n          className: \"h-8 w-8 text-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-2xl font-bold text-white\",\n            children: \"Risk Monitoring\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400\",\n            children: \"Real-time portfolio risk analysis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setAutoRefresh(!autoRefresh),\n          className: `p-2 rounded-lg transition-colors ${autoRefresh ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300'}`,\n          title: \"Auto-refresh every 15 seconds\",\n          children: /*#__PURE__*/_jsxDEV(Settings, {\n            className: \"h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: fetchPositionData,\n          disabled: loading,\n          className: \"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50\",\n          children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n            className: `h-4 w-4 ${loading ? 'animate-spin' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this), \"Refresh\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full bg-gray-700 rounded-full h-1\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-600 h-1 rounded-full animate-pulse\",\n        style: {\n          width: '70%'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 9\n    }, this), lastUpdate && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-blue-600/10 border border-blue-600/20 rounded-lg p-3 flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(Clock, {\n        className: \"h-4 w-4 text-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-blue-400 text-sm\",\n        children: [\"Last updated: \", lastUpdate.toLocaleString(), autoRefresh && wsConnected && ' (Real-time updates active)', autoRefresh && !wsConnected && ' (WebSocket disconnected)']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 11\n      }, this), wsConnected && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-auto flex items-center gap-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-green-500 rounded-full animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-green-400 text-xs\",\n          children: \"Live\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 13\n      }, this), !wsConnected && autoRefresh && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ml-auto flex items-center gap-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-red-500 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-red-400 text-xs\",\n          children: \"Offline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 rounded-xl p-6 border border-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-semibold text-white mb-4\",\n        children: \"Account Configuration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-300 mb-2\",\n            children: \"Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedAccount,\n            onChange: e => setSelectedAccount(e.target.value),\n            className: \"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Accounts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 15\n            }, this), accounts.map(account => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: account.name,\n              children: account.name\n            }, account.name, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 465,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), selectedAccount !== 'all' && timeRanges[selectedAccount] && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-300 mb-2\",\n              children: \"Start Time (UTC)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"datetime-local\",\n              value: timeRanges[selectedAccount].startTime,\n              onChange: e => updateTimeRange(selectedAccount, 'startTime', e.target.value),\n              className: \"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-300 mb-2\",\n              children: \"End Time (UTC)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"datetime-local\",\n              value: timeRanges[selectedAccount].endTime,\n              onChange: e => updateTimeRange(selectedAccount, 'endTime', e.target.value),\n              className: \"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-end\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSyncTrades,\n              disabled: loading,\n              className: \"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white rounded-lg px-4 py-2 font-medium transition-colors\",\n              children: loading ? 'Syncing...' : 'Sync Trades'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this), selectedAccount !== 'all' && activeSymbols.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-3 bg-blue-600/10 border border-blue-600/20 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-blue-400 text-sm font-medium mb-2\",\n          children: [\"Trading Symbols for \", selectedAccount, \":\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap gap-2\",\n          children: activeSymbols.map((symbol, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"inline-block px-2 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-md font-mono\",\n            children: symbol\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-red-600/10 border border-red-600/20 rounded-lg p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n          className: \"h-5 w-5 text-red-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-400 font-medium\",\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-300 mt-1\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(null),\n        className: \"mt-2 text-red-400 hover:text-red-300 text-sm underline\",\n        children: \"Dismiss\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 9\n    }, this), syncStatus.status && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `border rounded-lg p-4 ${syncStatus.status === 'running' ? 'bg-blue-600/10 border-blue-600/20' : syncStatus.status === 'completed' ? 'bg-green-600/10 border-green-600/20' : 'bg-red-600/10 border-red-600/20'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [syncStatus.status === 'running' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Activity, {\n            className: \"h-5 w-5 text-blue-400 animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-blue-400 font-medium\",\n            children: \"Synchronizing Trades\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), syncStatus.status === 'completed' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(TrendingUp, {\n            className: \"h-5 w-5 text-green-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-green-400 font-medium\",\n            children: \"Sync Completed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), syncStatus.status === 'failed' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n            className: \"h-5 w-5 text-red-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-400 font-medium\",\n            children: \"Sync Failed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `mt-1 ${syncStatus.status === 'running' ? 'text-blue-300' : syncStatus.status === 'completed' ? 'text-green-300' : 'text-red-300'}`,\n        children: syncStatus.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 11\n      }, this), syncStatus.summary && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3 grid grid-cols-2 md:grid-cols-4 gap-3 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-700/50 rounded-lg p-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400\",\n            children: \"Exchanges\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-white font-medium\",\n            children: syncStatus.summary.total_exchanges\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-700/50 rounded-lg p-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400\",\n            children: \"Success Rate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-white font-medium\",\n            children: syncStatus.summary.success_rate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-700/50 rounded-lg p-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400\",\n            children: \"Trades Synced\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-white font-medium\",\n            children: syncStatus.summary.total_trades_synced\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-700/50 rounded-lg p-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-400\",\n            children: \"Requests Made\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-white font-medium\",\n            children: syncStatus.summary.total_requests_made\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 13\n      }, this), syncStatus.status !== 'running' && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSyncStatus({}),\n        className: \"mt-2 text-gray-400 hover:text-gray-300 text-sm underline\",\n        children: \"Dismiss\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-gray-800 rounded-xl p-6 border ${getRiskBgColor(safeNumber(riskMetrics.riskScore))}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 text-sm\",\n              children: \"Risk Score\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-3xl font-bold ${getRiskColor(safeNumber(riskMetrics.riskScore))}`,\n              children: formatNumber(riskMetrics.riskScore || 0, 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 620,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `inline-block px-2 py-1 rounded text-xs font-medium ${getRiskBgColor(safeNumber(riskMetrics.riskScore))}`,\n              children: getRiskLabel(safeNumber(riskMetrics.riskScore))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(AlertTriangle, {\n            className: `h-8 w-8 ${getRiskColor(safeNumber(riskMetrics.riskScore))}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 627,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 rounded-xl p-6 border border-gray-700\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 text-sm\",\n              children: \"Total Exposure\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-3xl font-bold text-white\",\n              children: [\"$\", formatCurrency(riskMetrics.totalExposure || 0)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 text-sm\",\n              children: [\"Net: $\", formatCurrency(riskMetrics.netExposure || 0)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 638,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 633,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DollarSign, {\n            className: \"h-8 w-8 text-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 rounded-xl p-6 border border-gray-700\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 text-sm\",\n              children: \"Long/Short Ratio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 649,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-3xl font-bold text-white\",\n              children: formatNumber(riskMetrics.longShortRatio || 0, 2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 650,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 text-sm\",\n              children: [safeNumber((_positionData$summary = positionData.summary) === null || _positionData$summary === void 0 ? void 0 : _positionData$summary.open_positions), \" positions\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(BarChart3, {\n            className: \"h-8 w-8 text-purple-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gray-800 rounded-xl p-6 border border-gray-700\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 text-sm\",\n              children: \"Diversification\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-3xl font-bold text-white\",\n              children: formatNumber(riskMetrics.portfolioDiversification || 0, 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 665,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 text-sm\",\n              children: \"symbols\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 668,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 663,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TrendingUp, {\n            className: \"h-8 w-8 text-green-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 615,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 border-b border-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-white\",\n          children: \"Position Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-400 text-sm mt-1\",\n          children: \"Click on a position to view exchange breakdown\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-700/50\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-sm font-medium text-gray-300 w-8\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 685,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-sm font-medium text-gray-300\",\n                children: \"Symbol\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 686,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-sm font-medium text-gray-300\",\n                children: \"Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 687,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-right text-sm font-medium text-gray-300\",\n                children: \"Size\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 688,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-right text-sm font-medium text-gray-300\",\n                children: \"Value\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 689,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-right text-sm font-medium text-gray-300\",\n                children: \"Side\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 690,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-right text-sm font-medium text-gray-300\",\n                children: \"Avg Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-right text-sm font-medium text-gray-300\",\n                children: \"Concentration\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 692,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"divide-y divide-gray-700\",\n            children: [Object.entries(positionData.netPositions || {}).map(([symbol, position]) => {\n              var _riskMetrics$symbolCo;\n              const isExpanded = expandedPositions.has(symbol);\n              const detailedPositions = getDetailedPositionsForSymbol(symbol);\n              return /*#__PURE__*/_jsxDEV(React.Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"hover:bg-gray-700/50 cursor-pointer transition-colors\",\n                  onClick: () => togglePositionExpansion(symbol),\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4\",\n                    children: isExpanded ? /*#__PURE__*/_jsxDEV(ChevronDown, {\n                      className: \"h-4 w-4 text-gray-400\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 709,\n                      columnNumber: 27\n                    }, this) : /*#__PURE__*/_jsxDEV(ChevronRight, {\n                      className: \"h-4 w-4 text-gray-400\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 711,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 707,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 text-white font-medium\",\n                    children: symbol\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 714,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `inline-block px-2 py-1 text-xs rounded-md font-medium ${position.is_open ? 'bg-blue-600/20 text-blue-400' : 'bg-gray-600/20 text-gray-400'}`,\n                      children: position.is_open ? 'Net Position' : 'Net Position (Zero)'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 716,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 715,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 text-right text-white font-semibold\",\n                    children: formatNumber(position.size)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 724,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 text-right text-white font-semibold\",\n                    children: [\"$\", formatCurrency(position.value)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 725,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 text-right\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `inline-block px-2 py-1 rounded text-xs font-medium ${position.side === 'long' ? 'bg-green-500/20 text-green-400' : position.side === 'short' ? 'bg-red-500/20 text-red-400' : 'bg-gray-500/20 text-gray-400'}`,\n                      children: position.side || 'flat'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 727,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 726,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 text-right text-white font-semibold\",\n                    children: [\"$\", formatNumber(position.avg_price)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 735,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-4 text-right text-white\",\n                    children: [formatNumber(((_riskMetrics$symbolCo = riskMetrics.symbolConcentration) === null || _riskMetrics$symbolCo === void 0 ? void 0 : _riskMetrics$symbolCo[symbol]) || 0, 1), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 738,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 703,\n                  columnNumber: 21\n                }, this), isExpanded && detailedPositions.map((pos, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"bg-gray-700/30\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 746,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-3 text-gray-300 pl-8\",\n                    children: [\"\\u2514 \", pos.symbol]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 747,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `inline-block px-2 py-1 text-xs rounded-md font-medium ${pos.is_perpetual ? 'bg-purple-600/20 text-purple-400' : 'bg-gray-600/20 text-gray-400'}`,\n                        children: pos.exchange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 750,\n                        columnNumber: 29\n                      }, this), pos.is_perpetual && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"inline-block px-1 py-0.5 bg-purple-500/20 text-purple-300 text-xs rounded font-mono\",\n                        children: \"PERP\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 758,\n                        columnNumber: 31\n                      }, this), !pos.is_open && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"inline-block px-1 py-0.5 bg-gray-500/20 text-gray-400 text-xs rounded font-mono\",\n                        children: \"ZERO\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 763,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 749,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 748,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-3 text-right text-gray-300\",\n                    children: formatNumber(pos.size)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 769,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-3 text-right text-gray-300\",\n                    children: [\"$\", formatCurrency(pos.value)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 770,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-3 text-right\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `inline-block px-2 py-1 rounded text-xs font-medium ${pos.side === 'long' ? 'bg-green-500/10 text-green-300 border border-green-500/20' : pos.side === 'short' ? 'bg-red-500/10 text-red-300 border border-red-500/20' : 'bg-gray-500/10 text-gray-300 border border-gray-500/20'}`,\n                      children: pos.side || 'flat'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 772,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 771,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-3 text-right text-gray-300\",\n                    children: [\"$\", formatNumber(pos.avg_price)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 780,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"px-6 py-3 text-right text-gray-400 text-sm\",\n                    children: position.value && Math.abs(safeNumber(position.value)) > 0 ? formatNumber(Math.abs(safeNumber(pos.value)) / Math.abs(safeNumber(position.value)) * 100, 1) + '%' : '0.0%'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 783,\n                    columnNumber: 25\n                  }, this)]\n                }, `${symbol}-${pos.exchange}-${index}`, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 745,\n                  columnNumber: 23\n                }, this))]\n              }, symbol, true, {\n                fileName: _jsxFileName,\n                lineNumber: 701,\n                columnNumber: 19\n              }, this);\n            }), Object.keys(positionData.netPositions || {}).length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"8\",\n                className: \"px-6 py-8 text-center text-gray-400\",\n                children: \"No positions found\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 796,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 795,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 695,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 397,\n    columnNumber: 5\n  }, this);\n};\n_s(RiskMonitoring, \"rr9ivaYl2E5GEcjk5cQu9gqU0l8=\");\n_c = RiskMonitoring;\nexport default RiskMonitoring;\nvar _c;\n$RefreshReg$(_c, \"RiskMonitoring\");","map":{"version":3,"names":["React","useState","useEffect","Shield","TrendingUp","TrendingDown","AlertTriangle","Activity","DollarSign","BarChart3","RefreshCw","Settings","Download","Clock","ChevronDown","ChevronRight","jsxDEV","_jsxDEV","Fragment","_Fragment","RiskMonitoring","_s","_positionData$summary","accounts","setAccounts","selectedAccount","setSelectedAccount","positionData","setPositionData","riskMetrics","setRiskMetrics","loading","setLoading","lastUpdate","setLastUpdate","timeRanges","setTimeRanges","autoRefresh","setAutoRefresh","wsConnected","setWsConnected","wsConnection","setWsConnection","activeSymbols","setActiveSymbols","error","setError","syncStatus","setSyncStatus","wsStatus","setWsStatus","expandedPositions","setExpandedPositions","Set","safeNumber","value","defaultValue","undefined","num","parseFloat","Number","isNaN","formatCurrency","toFixed","formatNumber","decimals","initializeTimeRanges","accountList","ranges","forEach","account","name","startTime","Date","now","toISOString","slice","endTime","loadAccounts","response","fetch","ok","Error","status","data","json","console","log","length","firstAccount","symbols","active_symbols","err","message","fetchPositionData","endpoints","responses","Promise","all","map","endpoint","catch","warn","resolve","responseData","r","summaryData","netData","exportData","summary","netPositions","net_positions","detailed","detailed_positions","calculateRiskMetrics","safeSummary","long_value","short_value","net_exposure","positions_by_exchange","safeNetPositions","metrics","totalExposure","netExposure","longShortRatio","portfolioDiversification","Object","keys","riskScore","calculateRiskScore","exchangeDistribution","symbolConcentration","calculateSymbolConcentration","score","Math","abs","positionValues","values","p","maxPosition","max","concentrationRatio","exchangeCount","min","safePositions","totalValue","reduce","sum","pos","concentrations","entries","symbol","updateTimeRange","accountName","field","prev","handleSyncTrades","method","headers","body","JSON","stringify","start_time","end_time","errorData","detail","result","results","ws","WebSocket","onopen","onmessage","event","parse","type","risk_metrics","side","amount","onclose","onerror","readyState","OPEN","close","getRiskColor","getRiskBgColor","getRiskLabel","togglePositionExpansion","newExpanded","has","delete","add","getDetailedPositionsForSymbol","filter","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","disabled","style","width","toLocaleString","onChange","e","target","index","total_exchanges","success_rate","total_trades_synced","total_requests_made","open_positions","position","_riskMetrics$symbolCo","isExpanded","detailedPositions","is_open","size","avg_price","is_perpetual","exchange","colSpan","_c","$RefreshReg$"],"sources":["/Users/jonnyisenberg/Desktop/MM_BOT/trading_bot_system/frontend/src/components/RiskMonitoring.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Shield, \n  TrendingUp, \n  TrendingDown, \n  AlertTriangle, \n  Activity, \n  DollarSign, \n  BarChart3,\n  RefreshCw,\n  Settings,\n  Download,\n  Clock,\n  ChevronDown,\n  ChevronRight\n} from 'lucide-react';\n\nconst RiskMonitoring = () => {\n  const [accounts, setAccounts] = useState([]);\n  const [selectedAccount, setSelectedAccount] = useState('');\n  const [positionData, setPositionData] = useState({});\n  const [riskMetrics, setRiskMetrics] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [lastUpdate, setLastUpdate] = useState(null);\n  const [timeRanges, setTimeRanges] = useState({});\n  const [autoRefresh, setAutoRefresh] = useState(false);\n  const [wsConnected, setWsConnected] = useState(false);\n  const [wsConnection, setWsConnection] = useState(null);\n  const [activeSymbols, setActiveSymbols] = useState([]);\n  const [error, setError] = useState(null);\n  const [syncStatus, setSyncStatus] = useState({});\n  const [wsStatus, setWsStatus] = useState('disconnected');\n  const [expandedPositions, setExpandedPositions] = useState(new Set());\n\n  // Helper function to safely convert string/number to number\n  const safeNumber = (value, defaultValue = 0) => {\n    if (value === null || value === undefined || value === '') return defaultValue;\n    const num = typeof value === 'string' ? parseFloat(value) : Number(value);\n    return isNaN(num) ? defaultValue : num;\n  };\n\n  // Helper function to format currency\n  const formatCurrency = (value) => {\n    return safeNumber(value).toFixed(2);\n  };\n\n  // Helper function to format number with decimals\n  const formatNumber = (value, decimals = 4) => {\n    return safeNumber(value).toFixed(decimals);\n  };\n\n  // Initialize time ranges for each account\n  const initializeTimeRanges = (accountList) => {\n    const ranges = {};\n    accountList.forEach(account => {\n      ranges[account.name] = {\n        startTime: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().slice(0, 16),\n        endTime: new Date().toISOString().slice(0, 16)\n      };\n    });\n    setTimeRanges(ranges);\n  };\n\n  // Load accounts data\n  const loadAccounts = async () => {\n    try {\n      setError(null);\n      const response = await fetch('/api/system/accounts');\n      \n      if (!response.ok) {\n        throw new Error(`Failed to load accounts: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      console.log('Accounts loaded:', data);\n      \n      setAccounts(data.accounts || []);\n      \n      // Initialize time ranges for all accounts\n      const ranges = {};\n      data.accounts.forEach(account => {\n        ranges[account.name] = {\n          startTime: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString().slice(0, 16),\n          endTime: new Date().toISOString().slice(0, 16)\n        };\n      });\n      setTimeRanges(ranges);\n      \n      // Auto-select first account and get its symbols\n      if (data.accounts && data.accounts.length > 0) {\n        const firstAccount = data.accounts[0];\n        setSelectedAccount(firstAccount.name);\n        \n        // Set active symbols from the account\n        const symbols = firstAccount.active_symbols || ['BERA/USDT'];\n        setActiveSymbols(symbols);\n        console.log('Active symbols from account:', symbols);\n      }\n    } catch (err) {\n      console.error('Error loading accounts:', err);\n      setError(err.message);\n      // Fallback symbols if accounts fail to load\n      setActiveSymbols(['BERA/USDT']);\n    }\n  };\n\n  // Fetch position data\n  const fetchPositionData = async () => {\n    setLoading(true);\n    try {\n      const endpoints = [\n        '/api/positions/summary',\n        '/api/positions/net',\n        '/api/positions/export/json'\n      ];\n\n      const responses = await Promise.all(\n        endpoints.map(endpoint => fetch(endpoint).catch(err => {\n          console.warn(`Failed to fetch ${endpoint}:`, err);\n          return { ok: false, json: () => Promise.resolve({}) };\n        }))\n      );\n\n      const responseData = await Promise.all(\n        responses.map(r => r.ok ? r.json() : {})\n      );\n\n      const [summaryData, netData, exportData] = responseData;\n\n      setPositionData({\n        summary: summaryData.summary || {},\n        netPositions: netData.net_positions || {},\n        detailed: exportData.detailed_positions || []\n      });\n\n      calculateRiskMetrics(summaryData.summary || {}, netData.net_positions || {});\n      setLastUpdate(new Date());\n    } catch (error) {\n      console.error('Error fetching position data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Calculate risk metrics\n  const calculateRiskMetrics = (summary, netPositions) => {\n    // Provide safe defaults for summary\n    const safeSummary = {\n      long_value: 0,\n      short_value: 0,\n      net_exposure: 0,\n      positions_by_exchange: {},\n      ...summary\n    };\n    \n    // Provide safe defaults for netPositions\n    const safeNetPositions = netPositions || {};\n    \n    const metrics = {\n      totalExposure: safeSummary.long_value + safeSummary.short_value,\n      netExposure: safeSummary.net_exposure,\n      longShortRatio: safeSummary.short_value > 0 ? safeSummary.long_value / safeSummary.short_value : 0,\n      portfolioDiversification: Object.keys(safeNetPositions).length,\n      riskScore: calculateRiskScore(safeSummary, safeNetPositions),\n      exchangeDistribution: safeSummary.positions_by_exchange,\n      symbolConcentration: calculateSymbolConcentration(safeNetPositions)\n    };\n    setRiskMetrics(metrics);\n  };\n\n  const calculateRiskScore = (summary, netPositions) => {\n    let score = 0;\n    \n    // Exposure risk (safe access)\n    const netExposure = Math.abs(summary.net_exposure || 0);\n    if (netExposure > 10000) score += 30;\n    else if (netExposure > 5000) score += 20;\n    else score += 10;\n\n    // Concentration risk (safe access)\n    const positionValues = Object.values(netPositions || {}).map(p => Math.abs(p.value || 0));\n    const maxPosition = positionValues.length > 0 ? Math.max(...positionValues) : 0;\n    const totalExposure = (summary.long_value || 0) + (summary.short_value || 0);\n    const concentrationRatio = totalExposure > 0 ? maxPosition / totalExposure : 0;\n    \n    if (concentrationRatio > 0.5) score += 40;\n    else if (concentrationRatio > 0.3) score += 25;\n    else score += 10;\n\n    // Exchange diversification (safe access)\n    const exchangeCount = Object.keys(summary.positions_by_exchange || {}).length;\n    if (exchangeCount < 3) score += 30;\n    else if (exchangeCount < 5) score += 20;\n    else score += 10;\n\n    return Math.min(score, 100);\n  };\n\n  const calculateSymbolConcentration = (netPositions) => {\n    const safePositions = netPositions || {};\n    const totalValue = Object.values(safePositions).reduce((sum, pos) => sum + Math.abs(pos.value || 0), 0);\n    const concentrations = {};\n    \n    Object.entries(safePositions).forEach(([symbol, pos]) => {\n      concentrations[symbol] = totalValue > 0 ? (Math.abs(pos.value || 0) / totalValue) * 100 : 0;\n    });\n    \n    return concentrations;\n  };\n\n  // Update time range for account\n  const updateTimeRange = (accountName, field, value) => {\n    setTimeRanges(prev => ({\n      ...prev,\n      [accountName]: {\n        ...prev[accountName],\n        [field]: value\n      }\n    }));\n  };\n\n  // Sync trades for time range\n  const handleSyncTrades = async () => {\n    if (!selectedAccount || !timeRanges[selectedAccount].startTime || !timeRanges[selectedAccount].endTime) {\n      setError('Please select an account and set both start and end times');\n      return;\n    }\n\n    if (!activeSymbols || activeSymbols.length === 0) {\n      setError('No trading symbols configured for this account');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    setSyncStatus({ status: 'running', message: 'Starting trade synchronization...' });\n\n    try {\n      const response = await fetch('/api/system/sync-trades', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          account: selectedAccount,\n          start_time: timeRanges[selectedAccount].startTime,\n          end_time: timeRanges[selectedAccount].endTime,\n          symbols: activeSymbols  // Use symbols from the selected account\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || `Sync failed: ${response.status}`);\n      }\n\n      const result = await response.json();\n      console.log('Sync result:', result);\n      \n      setSyncStatus({\n        status: 'completed',\n        message: result.message || 'Trade synchronization completed',\n        summary: result.summary,\n        results: result.results\n      });\n\n      // Reload positions after successful sync\n      await fetchPositionData();\n      \n    } catch (err) {\n      console.error('Error syncing trades:', err);\n      setError(err.message);\n      setSyncStatus({\n        status: 'failed',\n        message: `Sync failed: ${err.message}`\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // WebSocket connection for real-time updates\n  useEffect(() => {\n    if (autoRefresh) {\n      const ws = new WebSocket('ws://localhost:8000/ws/risk-monitoring');\n      \n      ws.onopen = () => {\n        console.log('WebSocket connected for risk monitoring');\n        setWsConnected(true);\n        setWsConnection(ws);\n      };\n      \n      ws.onmessage = (event) => {\n        try {\n          const message = JSON.parse(event.data);\n          console.log('WebSocket message received:', message);\n          \n          if (message.type === 'initial_data' || message.type === 'position_update') {\n            const data = message.data;\n            \n            // Update position data with safe defaults\n            setPositionData({\n              summary: data.summary || {},\n              netPositions: data.net_positions || {},\n              detailed: data.detailed_positions || []\n            });\n            \n            // Update risk metrics\n            if (data.risk_metrics) {\n              setRiskMetrics(data.risk_metrics);\n            } else if (data.summary && data.net_positions) {\n              calculateRiskMetrics(data.summary, data.net_positions);\n            }\n            \n            setLastUpdate(new Date());\n          }\n          \n          if (message.type === 'trade_update') {\n            console.log('Trade update received:', message);\n            // Show a brief notification for trade updates\n            if (message.data && message.data.symbol) {\n              console.log(`ðŸ”„ Trade executed: ${message.data.symbol} ${message.data.side} ${message.data.amount}`);\n            }\n          }\n          \n          if (message.type === 'position_change') {\n            console.log('Position change received:', message);\n            // Refresh position data when positions change\n            fetchPositionData();\n          }\n          \n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n        }\n      };\n      \n      ws.onclose = () => {\n        console.log('WebSocket disconnected');\n        setWsConnected(false);\n      };\n      \n      ws.onerror = (error) => {\n        console.error('WebSocket error:', error);\n        setWsConnected(false);\n      };\n      \n      // Cleanup function\n      return () => {\n        if (ws.readyState === WebSocket.OPEN) {\n          ws.close();\n        }\n      };\n    }\n  }, [autoRefresh]);\n\n  // Initial load\n  useEffect(() => {\n    loadAccounts();\n    fetchPositionData();\n  }, []);\n\n  const getRiskColor = (score) => {\n    if (score <= 30) return 'text-green-500';\n    if (score <= 60) return 'text-yellow-500';\n    return 'text-red-500';\n  };\n\n  const getRiskBgColor = (score) => {\n    if (score <= 30) return 'bg-green-500/10 border-green-500/20';\n    if (score <= 60) return 'bg-yellow-500/10 border-yellow-500/20';\n    return 'bg-red-500/10 border-red-500/20';\n  };\n\n  const getRiskLabel = (score) => {\n    if (score <= 30) return 'Low Risk';\n    if (score <= 60) return 'Medium Risk';\n    return 'High Risk';\n  };\n\n  // Toggle position expansion\n  const togglePositionExpansion = (symbol) => {\n    const newExpanded = new Set(expandedPositions);\n    if (newExpanded.has(symbol)) {\n      newExpanded.delete(symbol);\n    } else {\n      newExpanded.add(symbol);\n    }\n    setExpandedPositions(newExpanded);\n  };\n\n  // Get detailed positions for a symbol\n  const getDetailedPositionsForSymbol = (symbol) => {\n    return (positionData.detailed || []).filter(pos => pos.symbol === symbol);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <Shield className=\"h-8 w-8 text-blue-500\" />\n          <div>\n            <h1 className=\"text-2xl font-bold text-white\">Risk Monitoring</h1>\n            <p className=\"text-gray-400\">Real-time portfolio risk analysis</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => setAutoRefresh(!autoRefresh)}\n            className={`p-2 rounded-lg transition-colors ${\n              autoRefresh ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300'\n            }`}\n            title=\"Auto-refresh every 15 seconds\"\n          >\n            <Settings className=\"h-5 w-5\" />\n          </button>\n          <button\n            onClick={fetchPositionData}\n            disabled={loading}\n            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50\"\n          >\n            <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\n            Refresh\n          </button>\n        </div>\n      </div>\n\n      {/* Loading bar */}\n      {loading && (\n        <div className=\"w-full bg-gray-700 rounded-full h-1\">\n          <div className=\"bg-blue-600 h-1 rounded-full animate-pulse\" style={{ width: '70%' }}></div>\n        </div>\n      )}\n\n      {/* Last update info */}\n      {lastUpdate && (\n        <div className=\"bg-blue-600/10 border border-blue-600/20 rounded-lg p-3 flex items-center gap-2\">\n          <Clock className=\"h-4 w-4 text-blue-400\" />\n          <span className=\"text-blue-400 text-sm\">\n            Last updated: {lastUpdate.toLocaleString()}\n            {autoRefresh && wsConnected && ' (Real-time updates active)'}\n            {autoRefresh && !wsConnected && ' (WebSocket disconnected)'}\n          </span>\n          {wsConnected && (\n            <div className=\"ml-auto flex items-center gap-1\">\n              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n              <span className=\"text-green-400 text-xs\">Live</span>\n            </div>\n          )}\n          {!wsConnected && autoRefresh && (\n            <div className=\"ml-auto flex items-center gap-1\">\n              <div className=\"w-2 h-2 bg-red-500 rounded-full\"></div>\n              <span className=\"text-red-400 text-xs\">Offline</span>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Account Configuration */}\n      <div className=\"bg-gray-800 rounded-xl p-6 border border-gray-700\">\n        <h2 className=\"text-lg font-semibold text-white mb-4\">Account Configuration</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-300 mb-2\">Account</label>\n            <select\n              value={selectedAccount}\n              onChange={(e) => setSelectedAccount(e.target.value)}\n              className=\"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            >\n              <option value=\"all\">All Accounts</option>\n              {accounts.map(account => (\n                <option key={account.name} value={account.name}>\n                  {account.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          {selectedAccount !== 'all' && timeRanges[selectedAccount] && (\n            <>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Start Time (UTC)</label>\n                <input\n                  type=\"datetime-local\"\n                  value={timeRanges[selectedAccount].startTime}\n                  onChange={(e) => updateTimeRange(selectedAccount, 'startTime', e.target.value)}\n                  className=\"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">End Time (UTC)</label>\n                <input\n                  type=\"datetime-local\"\n                  value={timeRanges[selectedAccount].endTime}\n                  onChange={(e) => updateTimeRange(selectedAccount, 'endTime', e.target.value)}\n                  className=\"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n              <div className=\"flex items-end\">\n                <button\n                  onClick={handleSyncTrades}\n                  disabled={loading}\n                  className=\"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white rounded-lg px-4 py-2 font-medium transition-colors\"\n                >\n                  {loading ? 'Syncing...' : 'Sync Trades'}\n                </button>\n              </div>\n            </>\n          )}\n        </div>\n        \n        {/* Show active symbols */}\n        {selectedAccount !== 'all' && activeSymbols.length > 0 && (\n          <div className=\"mt-4 p-3 bg-blue-600/10 border border-blue-600/20 rounded-lg\">\n            <p className=\"text-blue-400 text-sm font-medium mb-2\">Trading Symbols for {selectedAccount}:</p>\n            <div className=\"flex flex-wrap gap-2\">\n              {activeSymbols.map((symbol, index) => (\n                <span\n                  key={index}\n                  className=\"inline-block px-2 py-1 bg-blue-600/20 text-blue-400 text-xs rounded-md font-mono\"\n                >\n                  {symbol}\n                </span>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"bg-red-600/10 border border-red-600/20 rounded-lg p-4\">\n          <div className=\"flex items-center gap-2\">\n            <AlertTriangle className=\"h-5 w-5 text-red-400\" />\n            <p className=\"text-red-400 font-medium\">Error</p>\n          </div>\n          <p className=\"text-red-300 mt-1\">{error}</p>\n          <button\n            onClick={() => setError(null)}\n            className=\"mt-2 text-red-400 hover:text-red-300 text-sm underline\"\n          >\n            Dismiss\n          </button>\n        </div>\n      )}\n\n      {/* Sync Status Display */}\n      {syncStatus.status && (\n        <div className={`border rounded-lg p-4 ${\n          syncStatus.status === 'running' ? 'bg-blue-600/10 border-blue-600/20' :\n          syncStatus.status === 'completed' ? 'bg-green-600/10 border-green-600/20' :\n          'bg-red-600/10 border-red-600/20'\n        }`}>\n          <div className=\"flex items-center gap-2\">\n            {syncStatus.status === 'running' && (\n              <>\n                <Activity className=\"h-5 w-5 text-blue-400 animate-pulse\" />\n                <p className=\"text-blue-400 font-medium\">Synchronizing Trades</p>\n              </>\n            )}\n            {syncStatus.status === 'completed' && (\n              <>\n                <TrendingUp className=\"h-5 w-5 text-green-400\" />\n                <p className=\"text-green-400 font-medium\">Sync Completed</p>\n              </>\n            )}\n            {syncStatus.status === 'failed' && (\n              <>\n                <AlertTriangle className=\"h-5 w-5 text-red-400\" />\n                <p className=\"text-red-400 font-medium\">Sync Failed</p>\n              </>\n            )}\n          </div>\n          <p className={`mt-1 ${\n            syncStatus.status === 'running' ? 'text-blue-300' :\n            syncStatus.status === 'completed' ? 'text-green-300' :\n            'text-red-300'\n          }`}>\n            {syncStatus.message}\n          </p>\n          \n          {syncStatus.summary && (\n            <div className=\"mt-3 grid grid-cols-2 md:grid-cols-4 gap-3 text-sm\">\n              <div className=\"bg-gray-700/50 rounded-lg p-2\">\n                <p className=\"text-gray-400\">Exchanges</p>\n                <p className=\"text-white font-medium\">{syncStatus.summary.total_exchanges}</p>\n              </div>\n              <div className=\"bg-gray-700/50 rounded-lg p-2\">\n                <p className=\"text-gray-400\">Success Rate</p>\n                <p className=\"text-white font-medium\">{syncStatus.summary.success_rate}</p>\n              </div>\n              <div className=\"bg-gray-700/50 rounded-lg p-2\">\n                <p className=\"text-gray-400\">Trades Synced</p>\n                <p className=\"text-white font-medium\">{syncStatus.summary.total_trades_synced}</p>\n              </div>\n              <div className=\"bg-gray-700/50 rounded-lg p-2\">\n                <p className=\"text-gray-400\">Requests Made</p>\n                <p className=\"text-white font-medium\">{syncStatus.summary.total_requests_made}</p>\n              </div>\n            </div>\n          )}\n          \n          {syncStatus.status !== 'running' && (\n            <button\n              onClick={() => setSyncStatus({})}\n              className=\"mt-2 text-gray-400 hover:text-gray-300 text-sm underline\"\n            >\n              Dismiss\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Risk Overview Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className={`bg-gray-800 rounded-xl p-6 border ${getRiskBgColor(safeNumber(riskMetrics.riskScore))}`}>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Risk Score</p>\n              <p className={`text-3xl font-bold ${getRiskColor(safeNumber(riskMetrics.riskScore))}`}>\n                {formatNumber(riskMetrics.riskScore || 0, 0)}\n              </p>\n              <span className={`inline-block px-2 py-1 rounded text-xs font-medium ${getRiskBgColor(safeNumber(riskMetrics.riskScore))}`}>\n                {getRiskLabel(safeNumber(riskMetrics.riskScore))}\n              </span>\n            </div>\n            <AlertTriangle className={`h-8 w-8 ${getRiskColor(safeNumber(riskMetrics.riskScore))}`} />\n          </div>\n        </div>\n\n        <div className=\"bg-gray-800 rounded-xl p-6 border border-gray-700\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Total Exposure</p>\n              <p className=\"text-3xl font-bold text-white\">\n                ${formatCurrency(riskMetrics.totalExposure || 0)}\n              </p>\n              <p className=\"text-gray-400 text-sm\">\n                Net: ${formatCurrency(riskMetrics.netExposure || 0)}\n              </p>\n            </div>\n            <DollarSign className=\"h-8 w-8 text-blue-500\" />\n          </div>\n        </div>\n\n        <div className=\"bg-gray-800 rounded-xl p-6 border border-gray-700\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Long/Short Ratio</p>\n              <p className=\"text-3xl font-bold text-white\">\n                {formatNumber(riskMetrics.longShortRatio || 0, 2)}\n              </p>\n              <p className=\"text-gray-400 text-sm\">\n                {safeNumber(positionData.summary?.open_positions)} positions\n              </p>\n            </div>\n            <BarChart3 className=\"h-8 w-8 text-purple-500\" />\n          </div>\n        </div>\n\n        <div className=\"bg-gray-800 rounded-xl p-6 border border-gray-700\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-gray-400 text-sm\">Diversification</p>\n              <p className=\"text-3xl font-bold text-white\">\n                {formatNumber(riskMetrics.portfolioDiversification || 0, 0)}\n              </p>\n              <p className=\"text-gray-400 text-sm\">symbols</p>\n            </div>\n            <TrendingUp className=\"h-8 w-8 text-green-500\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Position Details Table with Exchange Breakdown */}\n      <div className=\"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden\">\n        <div className=\"p-6 border-b border-gray-700\">\n          <h2 className=\"text-lg font-semibold text-white\">Position Details</h2>\n          <p className=\"text-gray-400 text-sm mt-1\">Click on a position to view exchange breakdown</p>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gray-700/50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-sm font-medium text-gray-300 w-8\"></th>\n                <th className=\"px-6 py-3 text-left text-sm font-medium text-gray-300\">Symbol</th>\n                <th className=\"px-6 py-3 text-left text-sm font-medium text-gray-300\">Type</th>\n                <th className=\"px-6 py-3 text-right text-sm font-medium text-gray-300\">Size</th>\n                <th className=\"px-6 py-3 text-right text-sm font-medium text-gray-300\">Value</th>\n                <th className=\"px-6 py-3 text-right text-sm font-medium text-gray-300\">Side</th>\n                <th className=\"px-6 py-3 text-right text-sm font-medium text-gray-300\">Avg Price</th>\n                <th className=\"px-6 py-3 text-right text-sm font-medium text-gray-300\">Concentration</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-gray-700\">\n              {Object.entries(positionData.netPositions || {}).map(([symbol, position]) => {\n                const isExpanded = expandedPositions.has(symbol);\n                const detailedPositions = getDetailedPositionsForSymbol(symbol);\n                \n                return (\n                  <React.Fragment key={symbol}>\n                    {/* Net Position Row */}\n                    <tr \n                      className=\"hover:bg-gray-700/50 cursor-pointer transition-colors\"\n                      onClick={() => togglePositionExpansion(symbol)}\n                    >\n                      <td className=\"px-6 py-4\">\n                        {isExpanded ? (\n                          <ChevronDown className=\"h-4 w-4 text-gray-400\" />\n                        ) : (\n                          <ChevronRight className=\"h-4 w-4 text-gray-400\" />\n                        )}\n                      </td>\n                      <td className=\"px-6 py-4 text-white font-medium\">{symbol}</td>\n                      <td className=\"px-6 py-4\">\n                        <span className={`inline-block px-2 py-1 text-xs rounded-md font-medium ${\n                          position.is_open \n                            ? 'bg-blue-600/20 text-blue-400' \n                            : 'bg-gray-600/20 text-gray-400'\n                        }`}>\n                          {position.is_open ? 'Net Position' : 'Net Position (Zero)'}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 text-right text-white font-semibold\">{formatNumber(position.size)}</td>\n                      <td className=\"px-6 py-4 text-right text-white font-semibold\">${formatCurrency(position.value)}</td>\n                      <td className=\"px-6 py-4 text-right\">\n                        <span className={`inline-block px-2 py-1 rounded text-xs font-medium ${\n                          position.side === 'long' ? 'bg-green-500/20 text-green-400' :\n                          position.side === 'short' ? 'bg-red-500/20 text-red-400' :\n                          'bg-gray-500/20 text-gray-400'\n                        }`}>\n                          {position.side || 'flat'}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 text-right text-white font-semibold\">\n                        ${formatNumber(position.avg_price)}\n                      </td>\n                      <td className=\"px-6 py-4 text-right text-white\">\n                        {formatNumber(riskMetrics.symbolConcentration?.[symbol] || 0, 1)}%\n                      </td>\n                    </tr>\n\n                    {/* Exchange Breakdown Rows */}\n                    {isExpanded && detailedPositions.map((pos, index) => (\n                      <tr key={`${symbol}-${pos.exchange}-${index}`} className=\"bg-gray-700/30\">\n                        <td className=\"px-6 py-3\"></td>\n                        <td className=\"px-6 py-3 text-gray-300 pl-8\">â”” {pos.symbol}</td>\n                        <td className=\"px-6 py-3\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className={`inline-block px-2 py-1 text-xs rounded-md font-medium ${\n                              pos.is_perpetual \n                                ? 'bg-purple-600/20 text-purple-400' \n                                : 'bg-gray-600/20 text-gray-400'\n                            }`}>\n                              {pos.exchange}\n                            </span>\n                            {pos.is_perpetual && (\n                              <span className=\"inline-block px-1 py-0.5 bg-purple-500/20 text-purple-300 text-xs rounded font-mono\">\n                                PERP\n                              </span>\n                            )}\n                            {!pos.is_open && (\n                              <span className=\"inline-block px-1 py-0.5 bg-gray-500/20 text-gray-400 text-xs rounded font-mono\">\n                                ZERO\n                              </span>\n                            )}\n                          </div>\n                        </td>\n                        <td className=\"px-6 py-3 text-right text-gray-300\">{formatNumber(pos.size)}</td>\n                        <td className=\"px-6 py-3 text-right text-gray-300\">${formatCurrency(pos.value)}</td>\n                        <td className=\"px-6 py-3 text-right\">\n                          <span className={`inline-block px-2 py-1 rounded text-xs font-medium ${\n                            pos.side === 'long' ? 'bg-green-500/10 text-green-300 border border-green-500/20' :\n                            pos.side === 'short' ? 'bg-red-500/10 text-red-300 border border-red-500/20' :\n                            'bg-gray-500/10 text-gray-300 border border-gray-500/20'\n                          }`}>\n                            {pos.side || 'flat'}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-3 text-right text-gray-300\">\n                          ${formatNumber(pos.avg_price)}\n                        </td>\n                        <td className=\"px-6 py-3 text-right text-gray-400 text-sm\">\n                          {position.value && Math.abs(safeNumber(position.value)) > 0 \n                            ? formatNumber((Math.abs(safeNumber(pos.value)) / Math.abs(safeNumber(position.value))) * 100, 1) + '%'\n                            : '0.0%'\n                          }\n                        </td>\n                      </tr>\n                    ))}\n                  </React.Fragment>\n                );\n              })}\n              {Object.keys(positionData.netPositions || {}).length === 0 && (\n                <tr>\n                  <td colSpan=\"8\" className=\"px-6 py-8 text-center text-gray-400\">\n                    No positions found\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RiskMonitoring; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SACEC,MAAM,EACNC,UAAU,EACVC,YAAY,EACZC,aAAa,EACbC,QAAQ,EACRC,UAAU,EACVC,SAAS,EACTC,SAAS,EACTC,QAAQ,EACRC,QAAQ,EACRC,KAAK,EACLC,WAAW,EACXC,YAAY,QACP,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEtB,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,qBAAA;EAC3B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACwB,eAAe,EAAEC,kBAAkB,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAAC0B,YAAY,EAAEC,eAAe,CAAC,GAAG3B,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpD,MAAM,CAAC4B,WAAW,EAAEC,cAAc,CAAC,GAAG7B,QAAQ,CAAC,CAAC,CAAC,CAAC;EAClD,MAAM,CAAC8B,OAAO,EAAEC,UAAU,CAAC,GAAG/B,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACgC,UAAU,EAAEC,aAAa,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACkC,UAAU,EAAEC,aAAa,CAAC,GAAGnC,QAAQ,CAAC,CAAC,CAAC,CAAC;EAChD,MAAM,CAACoC,WAAW,EAAEC,cAAc,CAAC,GAAGrC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACsC,WAAW,EAAEC,cAAc,CAAC,GAAGvC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACwC,YAAY,EAAEC,eAAe,CAAC,GAAGzC,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAAC0C,aAAa,EAAEC,gBAAgB,CAAC,GAAG3C,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAAC4C,KAAK,EAAEC,QAAQ,CAAC,GAAG7C,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAAC8C,UAAU,EAAEC,aAAa,CAAC,GAAG/C,QAAQ,CAAC,CAAC,CAAC,CAAC;EAChD,MAAM,CAACgD,QAAQ,EAAEC,WAAW,CAAC,GAAGjD,QAAQ,CAAC,cAAc,CAAC;EACxD,MAAM,CAACkD,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGnD,QAAQ,CAAC,IAAIoD,GAAG,CAAC,CAAC,CAAC;;EAErE;EACA,MAAMC,UAAU,GAAGA,CAACC,KAAK,EAAEC,YAAY,GAAG,CAAC,KAAK;IAC9C,IAAID,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKE,SAAS,IAAIF,KAAK,KAAK,EAAE,EAAE,OAAOC,YAAY;IAC9E,MAAME,GAAG,GAAG,OAAOH,KAAK,KAAK,QAAQ,GAAGI,UAAU,CAACJ,KAAK,CAAC,GAAGK,MAAM,CAACL,KAAK,CAAC;IACzE,OAAOM,KAAK,CAACH,GAAG,CAAC,GAAGF,YAAY,GAAGE,GAAG;EACxC,CAAC;;EAED;EACA,MAAMI,cAAc,GAAIP,KAAK,IAAK;IAChC,OAAOD,UAAU,CAACC,KAAK,CAAC,CAACQ,OAAO,CAAC,CAAC,CAAC;EACrC,CAAC;;EAED;EACA,MAAMC,YAAY,GAAGA,CAACT,KAAK,EAAEU,QAAQ,GAAG,CAAC,KAAK;IAC5C,OAAOX,UAAU,CAACC,KAAK,CAAC,CAACQ,OAAO,CAACE,QAAQ,CAAC;EAC5C,CAAC;;EAED;EACA,MAAMC,oBAAoB,GAAIC,WAAW,IAAK;IAC5C,MAAMC,MAAM,GAAG,CAAC,CAAC;IACjBD,WAAW,CAACE,OAAO,CAACC,OAAO,IAAI;MAC7BF,MAAM,CAACE,OAAO,CAACC,IAAI,CAAC,GAAG;QACrBC,SAAS,EAAE,IAAIC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;QAChFC,OAAO,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACE,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE;MAC/C,CAAC;IACH,CAAC,CAAC;IACFxC,aAAa,CAACgC,MAAM,CAAC;EACvB,CAAC;;EAED;EACA,MAAMU,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACFhC,QAAQ,CAAC,IAAI,CAAC;MACd,MAAMiC,QAAQ,GAAG,MAAMC,KAAK,CAAC,sBAAsB,CAAC;MAEpD,IAAI,CAACD,QAAQ,CAACE,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,4BAA4BH,QAAQ,CAACI,MAAM,EAAE,CAAC;MAChE;MAEA,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MAClCC,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEH,IAAI,CAAC;MAErC5D,WAAW,CAAC4D,IAAI,CAAC7D,QAAQ,IAAI,EAAE,CAAC;;MAEhC;MACA,MAAM6C,MAAM,GAAG,CAAC,CAAC;MACjBgB,IAAI,CAAC7D,QAAQ,CAAC8C,OAAO,CAACC,OAAO,IAAI;QAC/BF,MAAM,CAACE,OAAO,CAACC,IAAI,CAAC,GAAG;UACrBC,SAAS,EAAE,IAAIC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;UAChFC,OAAO,EAAE,IAAIJ,IAAI,CAAC,CAAC,CAACE,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE;QAC/C,CAAC;MACH,CAAC,CAAC;MACFxC,aAAa,CAACgC,MAAM,CAAC;;MAErB;MACA,IAAIgB,IAAI,CAAC7D,QAAQ,IAAI6D,IAAI,CAAC7D,QAAQ,CAACiE,MAAM,GAAG,CAAC,EAAE;QAC7C,MAAMC,YAAY,GAAGL,IAAI,CAAC7D,QAAQ,CAAC,CAAC,CAAC;QACrCG,kBAAkB,CAAC+D,YAAY,CAAClB,IAAI,CAAC;;QAErC;QACA,MAAMmB,OAAO,GAAGD,YAAY,CAACE,cAAc,IAAI,CAAC,WAAW,CAAC;QAC5D/C,gBAAgB,CAAC8C,OAAO,CAAC;QACzBJ,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEG,OAAO,CAAC;MACtD;IACF,CAAC,CAAC,OAAOE,GAAG,EAAE;MACZN,OAAO,CAACzC,KAAK,CAAC,yBAAyB,EAAE+C,GAAG,CAAC;MAC7C9C,QAAQ,CAAC8C,GAAG,CAACC,OAAO,CAAC;MACrB;MACAjD,gBAAgB,CAAC,CAAC,WAAW,CAAC,CAAC;IACjC;EACF,CAAC;;EAED;EACA,MAAMkD,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC9D,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAM+D,SAAS,GAAG,CAChB,wBAAwB,EACxB,oBAAoB,EACpB,4BAA4B,CAC7B;MAED,MAAMC,SAAS,GAAG,MAAMC,OAAO,CAACC,GAAG,CACjCH,SAAS,CAACI,GAAG,CAACC,QAAQ,IAAIpB,KAAK,CAACoB,QAAQ,CAAC,CAACC,KAAK,CAACT,GAAG,IAAI;QACrDN,OAAO,CAACgB,IAAI,CAAC,mBAAmBF,QAAQ,GAAG,EAAER,GAAG,CAAC;QACjD,OAAO;UAAEX,EAAE,EAAE,KAAK;UAAEI,IAAI,EAAEA,CAAA,KAAMY,OAAO,CAACM,OAAO,CAAC,CAAC,CAAC;QAAE,CAAC;MACvD,CAAC,CAAC,CACJ,CAAC;MAED,MAAMC,YAAY,GAAG,MAAMP,OAAO,CAACC,GAAG,CACpCF,SAAS,CAACG,GAAG,CAACM,CAAC,IAAIA,CAAC,CAACxB,EAAE,GAAGwB,CAAC,CAACpB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CACzC,CAAC;MAED,MAAM,CAACqB,WAAW,EAAEC,OAAO,EAAEC,UAAU,CAAC,GAAGJ,YAAY;MAEvD5E,eAAe,CAAC;QACdiF,OAAO,EAAEH,WAAW,CAACG,OAAO,IAAI,CAAC,CAAC;QAClCC,YAAY,EAAEH,OAAO,CAACI,aAAa,IAAI,CAAC,CAAC;QACzCC,QAAQ,EAAEJ,UAAU,CAACK,kBAAkB,IAAI;MAC7C,CAAC,CAAC;MAEFC,oBAAoB,CAACR,WAAW,CAACG,OAAO,IAAI,CAAC,CAAC,EAAEF,OAAO,CAACI,aAAa,IAAI,CAAC,CAAC,CAAC;MAC5E7E,aAAa,CAAC,IAAIuC,IAAI,CAAC,CAAC,CAAC;IAC3B,CAAC,CAAC,OAAO5B,KAAK,EAAE;MACdyC,OAAO,CAACzC,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;IACvD,CAAC,SAAS;MACRb,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAMkF,oBAAoB,GAAGA,CAACL,OAAO,EAAEC,YAAY,KAAK;IACtD;IACA,MAAMK,WAAW,GAAG;MAClBC,UAAU,EAAE,CAAC;MACbC,WAAW,EAAE,CAAC;MACdC,YAAY,EAAE,CAAC;MACfC,qBAAqB,EAAE,CAAC,CAAC;MACzB,GAAGV;IACL,CAAC;;IAED;IACA,MAAMW,gBAAgB,GAAGV,YAAY,IAAI,CAAC,CAAC;IAE3C,MAAMW,OAAO,GAAG;MACdC,aAAa,EAAEP,WAAW,CAACC,UAAU,GAAGD,WAAW,CAACE,WAAW;MAC/DM,WAAW,EAAER,WAAW,CAACG,YAAY;MACrCM,cAAc,EAAET,WAAW,CAACE,WAAW,GAAG,CAAC,GAAGF,WAAW,CAACC,UAAU,GAAGD,WAAW,CAACE,WAAW,GAAG,CAAC;MAClGQ,wBAAwB,EAAEC,MAAM,CAACC,IAAI,CAACP,gBAAgB,CAAC,CAAChC,MAAM;MAC9DwC,SAAS,EAAEC,kBAAkB,CAACd,WAAW,EAAEK,gBAAgB,CAAC;MAC5DU,oBAAoB,EAAEf,WAAW,CAACI,qBAAqB;MACvDY,mBAAmB,EAAEC,4BAA4B,CAACZ,gBAAgB;IACpE,CAAC;IACD1F,cAAc,CAAC2F,OAAO,CAAC;EACzB,CAAC;EAED,MAAMQ,kBAAkB,GAAGA,CAACpB,OAAO,EAAEC,YAAY,KAAK;IACpD,IAAIuB,KAAK,GAAG,CAAC;;IAEb;IACA,MAAMV,WAAW,GAAGW,IAAI,CAACC,GAAG,CAAC1B,OAAO,CAACS,YAAY,IAAI,CAAC,CAAC;IACvD,IAAIK,WAAW,GAAG,KAAK,EAAEU,KAAK,IAAI,EAAE,CAAC,KAChC,IAAIV,WAAW,GAAG,IAAI,EAAEU,KAAK,IAAI,EAAE,CAAC,KACpCA,KAAK,IAAI,EAAE;;IAEhB;IACA,MAAMG,cAAc,GAAGV,MAAM,CAACW,MAAM,CAAC3B,YAAY,IAAI,CAAC,CAAC,CAAC,CAACX,GAAG,CAACuC,CAAC,IAAIJ,IAAI,CAACC,GAAG,CAACG,CAAC,CAACnF,KAAK,IAAI,CAAC,CAAC,CAAC;IACzF,MAAMoF,WAAW,GAAGH,cAAc,CAAChD,MAAM,GAAG,CAAC,GAAG8C,IAAI,CAACM,GAAG,CAAC,GAAGJ,cAAc,CAAC,GAAG,CAAC;IAC/E,MAAMd,aAAa,GAAG,CAACb,OAAO,CAACO,UAAU,IAAI,CAAC,KAAKP,OAAO,CAACQ,WAAW,IAAI,CAAC,CAAC;IAC5E,MAAMwB,kBAAkB,GAAGnB,aAAa,GAAG,CAAC,GAAGiB,WAAW,GAAGjB,aAAa,GAAG,CAAC;IAE9E,IAAImB,kBAAkB,GAAG,GAAG,EAAER,KAAK,IAAI,EAAE,CAAC,KACrC,IAAIQ,kBAAkB,GAAG,GAAG,EAAER,KAAK,IAAI,EAAE,CAAC,KAC1CA,KAAK,IAAI,EAAE;;IAEhB;IACA,MAAMS,aAAa,GAAGhB,MAAM,CAACC,IAAI,CAAClB,OAAO,CAACU,qBAAqB,IAAI,CAAC,CAAC,CAAC,CAAC/B,MAAM;IAC7E,IAAIsD,aAAa,GAAG,CAAC,EAAET,KAAK,IAAI,EAAE,CAAC,KAC9B,IAAIS,aAAa,GAAG,CAAC,EAAET,KAAK,IAAI,EAAE,CAAC,KACnCA,KAAK,IAAI,EAAE;IAEhB,OAAOC,IAAI,CAACS,GAAG,CAACV,KAAK,EAAE,GAAG,CAAC;EAC7B,CAAC;EAED,MAAMD,4BAA4B,GAAItB,YAAY,IAAK;IACrD,MAAMkC,aAAa,GAAGlC,YAAY,IAAI,CAAC,CAAC;IACxC,MAAMmC,UAAU,GAAGnB,MAAM,CAACW,MAAM,CAACO,aAAa,CAAC,CAACE,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAKD,GAAG,GAAGb,IAAI,CAACC,GAAG,CAACa,GAAG,CAAC7F,KAAK,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;IACvG,MAAM8F,cAAc,GAAG,CAAC,CAAC;IAEzBvB,MAAM,CAACwB,OAAO,CAACN,aAAa,CAAC,CAAC3E,OAAO,CAAC,CAAC,CAACkF,MAAM,EAAEH,GAAG,CAAC,KAAK;MACvDC,cAAc,CAACE,MAAM,CAAC,GAAGN,UAAU,GAAG,CAAC,GAAIX,IAAI,CAACC,GAAG,CAACa,GAAG,CAAC7F,KAAK,IAAI,CAAC,CAAC,GAAG0F,UAAU,GAAI,GAAG,GAAG,CAAC;IAC7F,CAAC,CAAC;IAEF,OAAOI,cAAc;EACvB,CAAC;;EAED;EACA,MAAMG,eAAe,GAAGA,CAACC,WAAW,EAAEC,KAAK,EAAEnG,KAAK,KAAK;IACrDnB,aAAa,CAACuH,IAAI,KAAK;MACrB,GAAGA,IAAI;MACP,CAACF,WAAW,GAAG;QACb,GAAGE,IAAI,CAACF,WAAW,CAAC;QACpB,CAACC,KAAK,GAAGnG;MACX;IACF,CAAC,CAAC,CAAC;EACL,CAAC;;EAED;EACA,MAAMqG,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI,CAACnI,eAAe,IAAI,CAACU,UAAU,CAACV,eAAe,CAAC,CAAC+C,SAAS,IAAI,CAACrC,UAAU,CAACV,eAAe,CAAC,CAACoD,OAAO,EAAE;MACtG/B,QAAQ,CAAC,2DAA2D,CAAC;MACrE;IACF;IAEA,IAAI,CAACH,aAAa,IAAIA,aAAa,CAAC6C,MAAM,KAAK,CAAC,EAAE;MAChD1C,QAAQ,CAAC,gDAAgD,CAAC;MAC1D;IACF;IAEAd,UAAU,CAAC,IAAI,CAAC;IAChBc,QAAQ,CAAC,IAAI,CAAC;IACdE,aAAa,CAAC;MAAEmC,MAAM,EAAE,SAAS;MAAEU,OAAO,EAAE;IAAoC,CAAC,CAAC;IAElF,IAAI;MACF,MAAMd,QAAQ,GAAG,MAAMC,KAAK,CAAC,yBAAyB,EAAE;QACtD6E,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnB3F,OAAO,EAAE7C,eAAe;UACxByI,UAAU,EAAE/H,UAAU,CAACV,eAAe,CAAC,CAAC+C,SAAS;UACjD2F,QAAQ,EAAEhI,UAAU,CAACV,eAAe,CAAC,CAACoD,OAAO;UAC7Ca,OAAO,EAAE/C,aAAa,CAAE;QAC1B,CAAC;MACH,CAAC,CAAC;MAEF,IAAI,CAACoC,QAAQ,CAACE,EAAE,EAAE;QAChB,MAAMmF,SAAS,GAAG,MAAMrF,QAAQ,CAACM,IAAI,CAAC,CAAC;QACvC,MAAM,IAAIH,KAAK,CAACkF,SAAS,CAACC,MAAM,IAAI,gBAAgBtF,QAAQ,CAACI,MAAM,EAAE,CAAC;MACxE;MAEA,MAAMmF,MAAM,GAAG,MAAMvF,QAAQ,CAACM,IAAI,CAAC,CAAC;MACpCC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAE+E,MAAM,CAAC;MAEnCtH,aAAa,CAAC;QACZmC,MAAM,EAAE,WAAW;QACnBU,OAAO,EAAEyE,MAAM,CAACzE,OAAO,IAAI,iCAAiC;QAC5DgB,OAAO,EAAEyD,MAAM,CAACzD,OAAO;QACvB0D,OAAO,EAAED,MAAM,CAACC;MAClB,CAAC,CAAC;;MAEF;MACA,MAAMzE,iBAAiB,CAAC,CAAC;IAE3B,CAAC,CAAC,OAAOF,GAAG,EAAE;MACZN,OAAO,CAACzC,KAAK,CAAC,uBAAuB,EAAE+C,GAAG,CAAC;MAC3C9C,QAAQ,CAAC8C,GAAG,CAACC,OAAO,CAAC;MACrB7C,aAAa,CAAC;QACZmC,MAAM,EAAE,QAAQ;QAChBU,OAAO,EAAE,gBAAgBD,GAAG,CAACC,OAAO;MACtC,CAAC,CAAC;IACJ,CAAC,SAAS;MACR7D,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA9B,SAAS,CAAC,MAAM;IACd,IAAImC,WAAW,EAAE;MACf,MAAMmI,EAAE,GAAG,IAAIC,SAAS,CAAC,wCAAwC,CAAC;MAElED,EAAE,CAACE,MAAM,GAAG,MAAM;QAChBpF,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;QACtD/C,cAAc,CAAC,IAAI,CAAC;QACpBE,eAAe,CAAC8H,EAAE,CAAC;MACrB,CAAC;MAEDA,EAAE,CAACG,SAAS,GAAIC,KAAK,IAAK;QACxB,IAAI;UACF,MAAM/E,OAAO,GAAGmE,IAAI,CAACa,KAAK,CAACD,KAAK,CAACxF,IAAI,CAAC;UACtCE,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEM,OAAO,CAAC;UAEnD,IAAIA,OAAO,CAACiF,IAAI,KAAK,cAAc,IAAIjF,OAAO,CAACiF,IAAI,KAAK,iBAAiB,EAAE;YACzE,MAAM1F,IAAI,GAAGS,OAAO,CAACT,IAAI;;YAEzB;YACAxD,eAAe,CAAC;cACdiF,OAAO,EAAEzB,IAAI,CAACyB,OAAO,IAAI,CAAC,CAAC;cAC3BC,YAAY,EAAE1B,IAAI,CAAC2B,aAAa,IAAI,CAAC,CAAC;cACtCC,QAAQ,EAAE5B,IAAI,CAAC6B,kBAAkB,IAAI;YACvC,CAAC,CAAC;;YAEF;YACA,IAAI7B,IAAI,CAAC2F,YAAY,EAAE;cACrBjJ,cAAc,CAACsD,IAAI,CAAC2F,YAAY,CAAC;YACnC,CAAC,MAAM,IAAI3F,IAAI,CAACyB,OAAO,IAAIzB,IAAI,CAAC2B,aAAa,EAAE;cAC7CG,oBAAoB,CAAC9B,IAAI,CAACyB,OAAO,EAAEzB,IAAI,CAAC2B,aAAa,CAAC;YACxD;YAEA7E,aAAa,CAAC,IAAIuC,IAAI,CAAC,CAAC,CAAC;UAC3B;UAEA,IAAIoB,OAAO,CAACiF,IAAI,KAAK,cAAc,EAAE;YACnCxF,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEM,OAAO,CAAC;YAC9C;YACA,IAAIA,OAAO,CAACT,IAAI,IAAIS,OAAO,CAACT,IAAI,CAACmE,MAAM,EAAE;cACvCjE,OAAO,CAACC,GAAG,CAAC,sBAAsBM,OAAO,CAACT,IAAI,CAACmE,MAAM,IAAI1D,OAAO,CAACT,IAAI,CAAC4F,IAAI,IAAInF,OAAO,CAACT,IAAI,CAAC6F,MAAM,EAAE,CAAC;YACtG;UACF;UAEA,IAAIpF,OAAO,CAACiF,IAAI,KAAK,iBAAiB,EAAE;YACtCxF,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEM,OAAO,CAAC;YACjD;YACAC,iBAAiB,CAAC,CAAC;UACrB;QAEF,CAAC,CAAC,OAAOjD,KAAK,EAAE;UACdyC,OAAO,CAACzC,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;QAC1D;MACF,CAAC;MAED2H,EAAE,CAACU,OAAO,GAAG,MAAM;QACjB5F,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;QACrC/C,cAAc,CAAC,KAAK,CAAC;MACvB,CAAC;MAEDgI,EAAE,CAACW,OAAO,GAAItI,KAAK,IAAK;QACtByC,OAAO,CAACzC,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;QACxCL,cAAc,CAAC,KAAK,CAAC;MACvB,CAAC;;MAED;MACA,OAAO,MAAM;QACX,IAAIgI,EAAE,CAACY,UAAU,KAAKX,SAAS,CAACY,IAAI,EAAE;UACpCb,EAAE,CAACc,KAAK,CAAC,CAAC;QACZ;MACF,CAAC;IACH;EACF,CAAC,EAAE,CAACjJ,WAAW,CAAC,CAAC;;EAEjB;EACAnC,SAAS,CAAC,MAAM;IACd4E,YAAY,CAAC,CAAC;IACdgB,iBAAiB,CAAC,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMyF,YAAY,GAAIlD,KAAK,IAAK;IAC9B,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,gBAAgB;IACxC,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,iBAAiB;IACzC,OAAO,cAAc;EACvB,CAAC;EAED,MAAMmD,cAAc,GAAInD,KAAK,IAAK;IAChC,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,qCAAqC;IAC7D,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,uCAAuC;IAC/D,OAAO,iCAAiC;EAC1C,CAAC;EAED,MAAMoD,YAAY,GAAIpD,KAAK,IAAK;IAC9B,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,UAAU;IAClC,IAAIA,KAAK,IAAI,EAAE,EAAE,OAAO,aAAa;IACrC,OAAO,WAAW;EACpB,CAAC;;EAED;EACA,MAAMqD,uBAAuB,GAAInC,MAAM,IAAK;IAC1C,MAAMoC,WAAW,GAAG,IAAItI,GAAG,CAACF,iBAAiB,CAAC;IAC9C,IAAIwI,WAAW,CAACC,GAAG,CAACrC,MAAM,CAAC,EAAE;MAC3BoC,WAAW,CAACE,MAAM,CAACtC,MAAM,CAAC;IAC5B,CAAC,MAAM;MACLoC,WAAW,CAACG,GAAG,CAACvC,MAAM,CAAC;IACzB;IACAnG,oBAAoB,CAACuI,WAAW,CAAC;EACnC,CAAC;;EAED;EACA,MAAMI,6BAA6B,GAAIxC,MAAM,IAAK;IAChD,OAAO,CAAC5H,YAAY,CAACqF,QAAQ,IAAI,EAAE,EAAEgF,MAAM,CAAC5C,GAAG,IAAIA,GAAG,CAACG,MAAM,KAAKA,MAAM,CAAC;EAC3E,CAAC;EAED,oBACEtI,OAAA;IAAKgL,SAAS,EAAC,WAAW;IAAAC,QAAA,gBAExBjL,OAAA;MAAKgL,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChDjL,OAAA;QAAKgL,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACtCjL,OAAA,CAACd,MAAM;UAAC8L,SAAS,EAAC;QAAuB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAC5CrL,OAAA;UAAAiL,QAAA,gBACEjL,OAAA;YAAIgL,SAAS,EAAC,+BAA+B;YAAAC,QAAA,EAAC;UAAe;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eAClErL,OAAA;YAAGgL,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAiC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/D,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACNrL,OAAA;QAAKgL,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACtCjL,OAAA;UACEsL,OAAO,EAAEA,CAAA,KAAMjK,cAAc,CAAC,CAACD,WAAW,CAAE;UAC5C4J,SAAS,EAAE,oCACT5J,WAAW,GAAG,wBAAwB,GAAG,2BAA2B,EACnE;UACHmK,KAAK,EAAC,+BAA+B;UAAAN,QAAA,eAErCjL,OAAA,CAACN,QAAQ;YAACsL,SAAS,EAAC;UAAS;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eACTrL,OAAA;UACEsL,OAAO,EAAEzG,iBAAkB;UAC3B2G,QAAQ,EAAE1K,OAAQ;UAClBkK,SAAS,EAAC,6HAA6H;UAAAC,QAAA,gBAEvIjL,OAAA,CAACP,SAAS;YAACuL,SAAS,EAAE,WAAWlK,OAAO,GAAG,cAAc,GAAG,EAAE;UAAG;YAAAoK,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,WAEtE;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAGLvK,OAAO,iBACNd,OAAA;MAAKgL,SAAS,EAAC,qCAAqC;MAAAC,QAAA,eAClDjL,OAAA;QAAKgL,SAAS,EAAC,4CAA4C;QAACS,KAAK,EAAE;UAAEC,KAAK,EAAE;QAAM;MAAE;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxF,CACN,EAGArK,UAAU,iBACThB,OAAA;MAAKgL,SAAS,EAAC,iFAAiF;MAAAC,QAAA,gBAC9FjL,OAAA,CAACJ,KAAK;QAACoL,SAAS,EAAC;MAAuB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC3CrL,OAAA;QAAMgL,SAAS,EAAC,uBAAuB;QAAAC,QAAA,GAAC,gBACxB,EAACjK,UAAU,CAAC2K,cAAc,CAAC,CAAC,EACzCvK,WAAW,IAAIE,WAAW,IAAI,6BAA6B,EAC3DF,WAAW,IAAI,CAACE,WAAW,IAAI,2BAA2B;MAAA;QAAA4J,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvD,CAAC,EACN/J,WAAW,iBACVtB,OAAA;QAAKgL,SAAS,EAAC,iCAAiC;QAAAC,QAAA,gBAC9CjL,OAAA;UAAKgL,SAAS,EAAC;QAAiD;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACvErL,OAAA;UAAMgL,SAAS,EAAC,wBAAwB;UAAAC,QAAA,EAAC;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjD,CACN,EACA,CAAC/J,WAAW,IAAIF,WAAW,iBAC1BpB,OAAA;QAAKgL,SAAS,EAAC,iCAAiC;QAAAC,QAAA,gBAC9CjL,OAAA;UAAKgL,SAAS,EAAC;QAAiC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACvDrL,OAAA;UAAMgL,SAAS,EAAC,sBAAsB;UAAAC,QAAA,EAAC;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClD,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACN,eAGDrL,OAAA;MAAKgL,SAAS,EAAC,mDAAmD;MAAAC,QAAA,gBAChEjL,OAAA;QAAIgL,SAAS,EAAC,uCAAuC;QAAAC,QAAA,EAAC;MAAqB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAChFrL,OAAA;QAAKgL,SAAS,EAAC,uCAAuC;QAAAC,QAAA,gBACpDjL,OAAA;UAAAiL,QAAA,gBACEjL,OAAA;YAAOgL,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAAO;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC/ErL,OAAA;YACEsC,KAAK,EAAE9B,eAAgB;YACvBoL,QAAQ,EAAGC,CAAC,IAAKpL,kBAAkB,CAACoL,CAAC,CAACC,MAAM,CAACxJ,KAAK,CAAE;YACpD0I,SAAS,EAAC,kIAAkI;YAAAC,QAAA,gBAE5IjL,OAAA;cAAQsC,KAAK,EAAC,KAAK;cAAA2I,QAAA,EAAC;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EACxC/K,QAAQ,CAAC4E,GAAG,CAAC7B,OAAO,iBACnBrD,OAAA;cAA2BsC,KAAK,EAAEe,OAAO,CAACC,IAAK;cAAA2H,QAAA,EAC5C5H,OAAO,CAACC;YAAI,GADFD,OAAO,CAACC,IAAI;cAAA4H,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEjB,CACT,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,EAEL7K,eAAe,KAAK,KAAK,IAAIU,UAAU,CAACV,eAAe,CAAC,iBACvDR,OAAA,CAAAE,SAAA;UAAA+K,QAAA,gBACEjL,OAAA;YAAAiL,QAAA,gBACEjL,OAAA;cAAOgL,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAAgB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACxFrL,OAAA;cACE6J,IAAI,EAAC,gBAAgB;cACrBvH,KAAK,EAAEpB,UAAU,CAACV,eAAe,CAAC,CAAC+C,SAAU;cAC7CqI,QAAQ,EAAGC,CAAC,IAAKtD,eAAe,CAAC/H,eAAe,EAAE,WAAW,EAAEqL,CAAC,CAACC,MAAM,CAACxJ,KAAK,CAAE;cAC/E0I,SAAS,EAAC;YAAkI;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7I,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eACNrL,OAAA;YAAAiL,QAAA,gBACEjL,OAAA;cAAOgL,SAAS,EAAC,8CAA8C;cAAAC,QAAA,EAAC;YAAc;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACtFrL,OAAA;cACE6J,IAAI,EAAC,gBAAgB;cACrBvH,KAAK,EAAEpB,UAAU,CAACV,eAAe,CAAC,CAACoD,OAAQ;cAC3CgI,QAAQ,EAAGC,CAAC,IAAKtD,eAAe,CAAC/H,eAAe,EAAE,SAAS,EAAEqL,CAAC,CAACC,MAAM,CAACxJ,KAAK,CAAE;cAC7E0I,SAAS,EAAC;YAAkI;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7I,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eACNrL,OAAA;YAAKgL,SAAS,EAAC,gBAAgB;YAAAC,QAAA,eAC7BjL,OAAA;cACEsL,OAAO,EAAE3C,gBAAiB;cAC1B6C,QAAQ,EAAE1K,OAAQ;cAClBkK,SAAS,EAAC,2HAA2H;cAAAC,QAAA,EAEpInK,OAAO,GAAG,YAAY,GAAG;YAAa;cAAAoK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA,eACN,CACH;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EAGL7K,eAAe,KAAK,KAAK,IAAIkB,aAAa,CAAC6C,MAAM,GAAG,CAAC,iBACpDvE,OAAA;QAAKgL,SAAS,EAAC,8DAA8D;QAAAC,QAAA,gBAC3EjL,OAAA;UAAGgL,SAAS,EAAC,wCAAwC;UAAAC,QAAA,GAAC,sBAAoB,EAACzK,eAAe,EAAC,GAAC;QAAA;UAAA0K,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAChGrL,OAAA;UAAKgL,SAAS,EAAC,sBAAsB;UAAAC,QAAA,EAClCvJ,aAAa,CAACwD,GAAG,CAAC,CAACoD,MAAM,EAAEyD,KAAK,kBAC/B/L,OAAA;YAEEgL,SAAS,EAAC,kFAAkF;YAAAC,QAAA,EAE3F3C;UAAM,GAHFyD,KAAK;YAAAb,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAIN,CACP;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAGLzJ,KAAK,iBACJ5B,OAAA;MAAKgL,SAAS,EAAC,uDAAuD;MAAAC,QAAA,gBACpEjL,OAAA;QAAKgL,SAAS,EAAC,yBAAyB;QAAAC,QAAA,gBACtCjL,OAAA,CAACX,aAAa;UAAC2L,SAAS,EAAC;QAAsB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAClDrL,OAAA;UAAGgL,SAAS,EAAC,0BAA0B;UAAAC,QAAA,EAAC;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9C,CAAC,eACNrL,OAAA;QAAGgL,SAAS,EAAC,mBAAmB;QAAAC,QAAA,EAAErJ;MAAK;QAAAsJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC5CrL,OAAA;QACEsL,OAAO,EAAEA,CAAA,KAAMzJ,QAAQ,CAAC,IAAI,CAAE;QAC9BmJ,SAAS,EAAC,wDAAwD;QAAAC,QAAA,EACnE;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN,EAGAvJ,UAAU,CAACoC,MAAM,iBAChBlE,OAAA;MAAKgL,SAAS,EAAE,yBACdlJ,UAAU,CAACoC,MAAM,KAAK,SAAS,GAAG,mCAAmC,GACrEpC,UAAU,CAACoC,MAAM,KAAK,WAAW,GAAG,qCAAqC,GACzE,iCAAiC,EAChC;MAAA+G,QAAA,gBACDjL,OAAA;QAAKgL,SAAS,EAAC,yBAAyB;QAAAC,QAAA,GACrCnJ,UAAU,CAACoC,MAAM,KAAK,SAAS,iBAC9BlE,OAAA,CAAAE,SAAA;UAAA+K,QAAA,gBACEjL,OAAA,CAACV,QAAQ;YAAC0L,SAAS,EAAC;UAAqC;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC5DrL,OAAA;YAAGgL,SAAS,EAAC,2BAA2B;YAAAC,QAAA,EAAC;UAAoB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA,eACjE,CACH,EACAvJ,UAAU,CAACoC,MAAM,KAAK,WAAW,iBAChClE,OAAA,CAAAE,SAAA;UAAA+K,QAAA,gBACEjL,OAAA,CAACb,UAAU;YAAC6L,SAAS,EAAC;UAAwB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACjDrL,OAAA;YAAGgL,SAAS,EAAC,4BAA4B;YAAAC,QAAA,EAAC;UAAc;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA,eAC5D,CACH,EACAvJ,UAAU,CAACoC,MAAM,KAAK,QAAQ,iBAC7BlE,OAAA,CAAAE,SAAA;UAAA+K,QAAA,gBACEjL,OAAA,CAACX,aAAa;YAAC2L,SAAS,EAAC;UAAsB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAClDrL,OAAA;YAAGgL,SAAS,EAAC,0BAA0B;YAAAC,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA,eACvD,CACH;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eACNrL,OAAA;QAAGgL,SAAS,EAAE,QACZlJ,UAAU,CAACoC,MAAM,KAAK,SAAS,GAAG,eAAe,GACjDpC,UAAU,CAACoC,MAAM,KAAK,WAAW,GAAG,gBAAgB,GACpD,cAAc,EACb;QAAA+G,QAAA,EACAnJ,UAAU,CAAC8C;MAAO;QAAAsG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClB,CAAC,EAEHvJ,UAAU,CAAC8D,OAAO,iBACjB5F,OAAA;QAAKgL,SAAS,EAAC,oDAAoD;QAAAC,QAAA,gBACjEjL,OAAA;UAAKgL,SAAS,EAAC,+BAA+B;UAAAC,QAAA,gBAC5CjL,OAAA;YAAGgL,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAC1CrL,OAAA;YAAGgL,SAAS,EAAC,wBAAwB;YAAAC,QAAA,EAAEnJ,UAAU,CAAC8D,OAAO,CAACoG;UAAe;YAAAd,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3E,CAAC,eACNrL,OAAA;UAAKgL,SAAS,EAAC,+BAA+B;UAAAC,QAAA,gBAC5CjL,OAAA;YAAGgL,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAY;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAC7CrL,OAAA;YAAGgL,SAAS,EAAC,wBAAwB;YAAAC,QAAA,EAAEnJ,UAAU,CAAC8D,OAAO,CAACqG;UAAY;YAAAf,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxE,CAAC,eACNrL,OAAA;UAAKgL,SAAS,EAAC,+BAA+B;UAAAC,QAAA,gBAC5CjL,OAAA;YAAGgL,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAC9CrL,OAAA;YAAGgL,SAAS,EAAC,wBAAwB;YAAAC,QAAA,EAAEnJ,UAAU,CAAC8D,OAAO,CAACsG;UAAmB;YAAAhB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/E,CAAC,eACNrL,OAAA;UAAKgL,SAAS,EAAC,+BAA+B;UAAAC,QAAA,gBAC5CjL,OAAA;YAAGgL,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAC;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eAC9CrL,OAAA;YAAGgL,SAAS,EAAC,wBAAwB;YAAAC,QAAA,EAAEnJ,UAAU,CAAC8D,OAAO,CAACuG;UAAmB;YAAAjB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/E,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,EAEAvJ,UAAU,CAACoC,MAAM,KAAK,SAAS,iBAC9BlE,OAAA;QACEsL,OAAO,EAAEA,CAAA,KAAMvJ,aAAa,CAAC,CAAC,CAAC,CAAE;QACjCiJ,SAAS,EAAC,0DAA0D;QAAAC,QAAA,EACrE;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACN,eAGDrL,OAAA;MAAKgL,SAAS,EAAC,sDAAsD;MAAAC,QAAA,gBACnEjL,OAAA;QAAKgL,SAAS,EAAE,qCAAqCT,cAAc,CAAClI,UAAU,CAACzB,WAAW,CAACmG,SAAS,CAAC,CAAC,EAAG;QAAAkE,QAAA,eACvGjL,OAAA;UAAKgL,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChDjL,OAAA;YAAAiL,QAAA,gBACEjL,OAAA;cAAGgL,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EAAC;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACnDrL,OAAA;cAAGgL,SAAS,EAAE,sBAAsBV,YAAY,CAACjI,UAAU,CAACzB,WAAW,CAACmG,SAAS,CAAC,CAAC,EAAG;cAAAkE,QAAA,EACnFlI,YAAY,CAACnC,WAAW,CAACmG,SAAS,IAAI,CAAC,EAAE,CAAC;YAAC;cAAAmE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3C,CAAC,eACJrL,OAAA;cAAMgL,SAAS,EAAE,sDAAsDT,cAAc,CAAClI,UAAU,CAACzB,WAAW,CAACmG,SAAS,CAAC,CAAC,EAAG;cAAAkE,QAAA,EACxHT,YAAY,CAACnI,UAAU,CAACzB,WAAW,CAACmG,SAAS,CAAC;YAAC;cAAAmE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5C,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eACNrL,OAAA,CAACX,aAAa;YAAC2L,SAAS,EAAE,WAAWV,YAAY,CAACjI,UAAU,CAACzB,WAAW,CAACmG,SAAS,CAAC,CAAC;UAAG;YAAAmE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvF;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAENrL,OAAA;QAAKgL,SAAS,EAAC,mDAAmD;QAAAC,QAAA,eAChEjL,OAAA;UAAKgL,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChDjL,OAAA;YAAAiL,QAAA,gBACEjL,OAAA;cAAGgL,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EAAC;YAAc;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACvDrL,OAAA;cAAGgL,SAAS,EAAC,+BAA+B;cAAAC,QAAA,GAAC,GAC1C,EAACpI,cAAc,CAACjC,WAAW,CAAC6F,aAAa,IAAI,CAAC,CAAC;YAAA;cAAAyE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/C,CAAC,eACJrL,OAAA;cAAGgL,SAAS,EAAC,uBAAuB;cAAAC,QAAA,GAAC,QAC7B,EAACpI,cAAc,CAACjC,WAAW,CAAC8F,WAAW,IAAI,CAAC,CAAC;YAAA;cAAAwE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eACNrL,OAAA,CAACT,UAAU;YAACyL,SAAS,EAAC;UAAuB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7C;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAENrL,OAAA;QAAKgL,SAAS,EAAC,mDAAmD;QAAAC,QAAA,eAChEjL,OAAA;UAAKgL,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChDjL,OAAA;YAAAiL,QAAA,gBACEjL,OAAA;cAAGgL,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EAAC;YAAgB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACzDrL,OAAA;cAAGgL,SAAS,EAAC,+BAA+B;cAAAC,QAAA,EACzClI,YAAY,CAACnC,WAAW,CAAC+F,cAAc,IAAI,CAAC,EAAE,CAAC;YAAC;cAAAuE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChD,CAAC,eACJrL,OAAA;cAAGgL,SAAS,EAAC,uBAAuB;cAAAC,QAAA,GACjC5I,UAAU,EAAAhC,qBAAA,GAACK,YAAY,CAACkF,OAAO,cAAAvF,qBAAA,uBAApBA,qBAAA,CAAsB+L,cAAc,CAAC,EAAC,YACpD;YAAA;cAAAlB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eACNrL,OAAA,CAACR,SAAS;YAACwL,SAAS,EAAC;UAAyB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAENrL,OAAA;QAAKgL,SAAS,EAAC,mDAAmD;QAAAC,QAAA,eAChEjL,OAAA;UAAKgL,SAAS,EAAC,mCAAmC;UAAAC,QAAA,gBAChDjL,OAAA;YAAAiL,QAAA,gBACEjL,OAAA;cAAGgL,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EAAC;YAAe;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eACxDrL,OAAA;cAAGgL,SAAS,EAAC,+BAA+B;cAAAC,QAAA,EACzClI,YAAY,CAACnC,WAAW,CAACgG,wBAAwB,IAAI,CAAC,EAAE,CAAC;YAAC;cAAAsE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1D,CAAC,eACJrL,OAAA;cAAGgL,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7C,CAAC,eACNrL,OAAA,CAACb,UAAU;YAAC6L,SAAS,EAAC;UAAwB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9C;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNrL,OAAA;MAAKgL,SAAS,EAAC,+DAA+D;MAAAC,QAAA,gBAC5EjL,OAAA;QAAKgL,SAAS,EAAC,8BAA8B;QAAAC,QAAA,gBAC3CjL,OAAA;UAAIgL,SAAS,EAAC,kCAAkC;UAAAC,QAAA,EAAC;QAAgB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACtErL,OAAA;UAAGgL,SAAS,EAAC,4BAA4B;UAAAC,QAAA,EAAC;QAA8C;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzF,CAAC,eACNrL,OAAA;QAAKgL,SAAS,EAAC,iBAAiB;QAAAC,QAAA,eAC9BjL,OAAA;UAAOgL,SAAS,EAAC,QAAQ;UAAAC,QAAA,gBACvBjL,OAAA;YAAOgL,SAAS,EAAC,gBAAgB;YAAAC,QAAA,eAC/BjL,OAAA;cAAAiL,QAAA,gBACEjL,OAAA;gBAAIgL,SAAS,EAAC;cAA2D;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eAC/ErL,OAAA;gBAAIgL,SAAS,EAAC,uDAAuD;gBAAAC,QAAA,EAAC;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACjFrL,OAAA;gBAAIgL,SAAS,EAAC,uDAAuD;gBAAAC,QAAA,EAAC;cAAI;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAC/ErL,OAAA;gBAAIgL,SAAS,EAAC,wDAAwD;gBAAAC,QAAA,EAAC;cAAI;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAChFrL,OAAA;gBAAIgL,SAAS,EAAC,wDAAwD;gBAAAC,QAAA,EAAC;cAAK;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACjFrL,OAAA;gBAAIgL,SAAS,EAAC,wDAAwD;gBAAAC,QAAA,EAAC;cAAI;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAChFrL,OAAA;gBAAIgL,SAAS,EAAC,wDAAwD;gBAAAC,QAAA,EAAC;cAAS;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACrFrL,OAAA;gBAAIgL,SAAS,EAAC,wDAAwD;gBAAAC,QAAA,EAAC;cAAa;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvF;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,eACRrL,OAAA;YAAOgL,SAAS,EAAC,0BAA0B;YAAAC,QAAA,GACxCpE,MAAM,CAACwB,OAAO,CAAC3H,YAAY,CAACmF,YAAY,IAAI,CAAC,CAAC,CAAC,CAACX,GAAG,CAAC,CAAC,CAACoD,MAAM,EAAE+D,QAAQ,CAAC,KAAK;cAAA,IAAAC,qBAAA;cAC3E,MAAMC,UAAU,GAAGrK,iBAAiB,CAACyI,GAAG,CAACrC,MAAM,CAAC;cAChD,MAAMkE,iBAAiB,GAAG1B,6BAA6B,CAACxC,MAAM,CAAC;cAE/D,oBACEtI,OAAA,CAACjB,KAAK,CAACkB,QAAQ;gBAAAgL,QAAA,gBAEbjL,OAAA;kBACEgL,SAAS,EAAC,uDAAuD;kBACjEM,OAAO,EAAEA,CAAA,KAAMb,uBAAuB,CAACnC,MAAM,CAAE;kBAAA2C,QAAA,gBAE/CjL,OAAA;oBAAIgL,SAAS,EAAC,WAAW;oBAAAC,QAAA,EACtBsB,UAAU,gBACTvM,OAAA,CAACH,WAAW;sBAACmL,SAAS,EAAC;oBAAuB;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,gBAEjDrL,OAAA,CAACF,YAAY;sBAACkL,SAAS,EAAC;oBAAuB;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAClD;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACC,CAAC,eACLrL,OAAA;oBAAIgL,SAAS,EAAC,kCAAkC;oBAAAC,QAAA,EAAE3C;kBAAM;oBAAA4C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAC9DrL,OAAA;oBAAIgL,SAAS,EAAC,WAAW;oBAAAC,QAAA,eACvBjL,OAAA;sBAAMgL,SAAS,EAAE,yDACfqB,QAAQ,CAACI,OAAO,GACZ,8BAA8B,GAC9B,8BAA8B,EACjC;sBAAAxB,QAAA,EACAoB,QAAQ,CAACI,OAAO,GAAG,cAAc,GAAG;oBAAqB;sBAAAvB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACtD;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL,CAAC,eACLrL,OAAA;oBAAIgL,SAAS,EAAC,+CAA+C;oBAAAC,QAAA,EAAElI,YAAY,CAACsJ,QAAQ,CAACK,IAAI;kBAAC;oBAAAxB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAChGrL,OAAA;oBAAIgL,SAAS,EAAC,+CAA+C;oBAAAC,QAAA,GAAC,GAAC,EAACpI,cAAc,CAACwJ,QAAQ,CAAC/J,KAAK,CAAC;kBAAA;oBAAA4I,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eACpGrL,OAAA;oBAAIgL,SAAS,EAAC,sBAAsB;oBAAAC,QAAA,eAClCjL,OAAA;sBAAMgL,SAAS,EAAE,sDACfqB,QAAQ,CAACtC,IAAI,KAAK,MAAM,GAAG,gCAAgC,GAC3DsC,QAAQ,CAACtC,IAAI,KAAK,OAAO,GAAG,4BAA4B,GACxD,8BAA8B,EAC7B;sBAAAkB,QAAA,EACAoB,QAAQ,CAACtC,IAAI,IAAI;oBAAM;sBAAAmB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACpB;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL,CAAC,eACLrL,OAAA;oBAAIgL,SAAS,EAAC,+CAA+C;oBAAAC,QAAA,GAAC,GAC3D,EAAClI,YAAY,CAACsJ,QAAQ,CAACM,SAAS,CAAC;kBAAA;oBAAAzB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAChC,CAAC,eACLrL,OAAA;oBAAIgL,SAAS,EAAC,iCAAiC;oBAAAC,QAAA,GAC5ClI,YAAY,CAAC,EAAAuJ,qBAAA,GAAA1L,WAAW,CAACsG,mBAAmB,cAAAoF,qBAAA,uBAA/BA,qBAAA,CAAkChE,MAAM,CAAC,KAAI,CAAC,EAAE,CAAC,CAAC,EAAC,GACnE;kBAAA;oBAAA4C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAI,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,EAGJkB,UAAU,IAAIC,iBAAiB,CAACtH,GAAG,CAAC,CAACiD,GAAG,EAAE4D,KAAK,kBAC9C/L,OAAA;kBAA+CgL,SAAS,EAAC,gBAAgB;kBAAAC,QAAA,gBACvEjL,OAAA;oBAAIgL,SAAS,EAAC;kBAAW;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAC/BrL,OAAA;oBAAIgL,SAAS,EAAC,8BAA8B;oBAAAC,QAAA,GAAC,SAAE,EAAC9C,GAAG,CAACG,MAAM;kBAAA;oBAAA4C,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAChErL,OAAA;oBAAIgL,SAAS,EAAC,WAAW;oBAAAC,QAAA,eACvBjL,OAAA;sBAAKgL,SAAS,EAAC,yBAAyB;sBAAAC,QAAA,gBACtCjL,OAAA;wBAAMgL,SAAS,EAAE,yDACf7C,GAAG,CAACyE,YAAY,GACZ,kCAAkC,GAClC,8BAA8B,EACjC;wBAAA3B,QAAA,EACA9C,GAAG,CAAC0E;sBAAQ;wBAAA3B,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACT,CAAC,EACNlD,GAAG,CAACyE,YAAY,iBACf5M,OAAA;wBAAMgL,SAAS,EAAC,qFAAqF;wBAAAC,QAAA,EAAC;sBAEtG;wBAAAC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CACP,EACA,CAAClD,GAAG,CAACsE,OAAO,iBACXzM,OAAA;wBAAMgL,SAAS,EAAC,iFAAiF;wBAAAC,QAAA,EAAC;sBAElG;wBAAAC,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAM,CACP;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACJ,CAAC,eACLrL,OAAA;oBAAIgL,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,EAAElI,YAAY,CAACoF,GAAG,CAACuE,IAAI;kBAAC;oBAAAxB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eAChFrL,OAAA;oBAAIgL,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,GAAC,GAAC,EAACpI,cAAc,CAACsF,GAAG,CAAC7F,KAAK,CAAC;kBAAA;oBAAA4I,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eACpFrL,OAAA;oBAAIgL,SAAS,EAAC,sBAAsB;oBAAAC,QAAA,eAClCjL,OAAA;sBAAMgL,SAAS,EAAE,sDACf7C,GAAG,CAAC4B,IAAI,KAAK,MAAM,GAAG,2DAA2D,GACjF5B,GAAG,CAAC4B,IAAI,KAAK,OAAO,GAAG,qDAAqD,GAC5E,wDAAwD,EACvD;sBAAAkB,QAAA,EACA9C,GAAG,CAAC4B,IAAI,IAAI;oBAAM;sBAAAmB,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACf;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL,CAAC,eACLrL,OAAA;oBAAIgL,SAAS,EAAC,oCAAoC;oBAAAC,QAAA,GAAC,GAChD,EAAClI,YAAY,CAACoF,GAAG,CAACwE,SAAS,CAAC;kBAAA;oBAAAzB,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC3B,CAAC,eACLrL,OAAA;oBAAIgL,SAAS,EAAC,4CAA4C;oBAAAC,QAAA,EACvDoB,QAAQ,CAAC/J,KAAK,IAAI+E,IAAI,CAACC,GAAG,CAACjF,UAAU,CAACgK,QAAQ,CAAC/J,KAAK,CAAC,CAAC,GAAG,CAAC,GACvDS,YAAY,CAAEsE,IAAI,CAACC,GAAG,CAACjF,UAAU,CAAC8F,GAAG,CAAC7F,KAAK,CAAC,CAAC,GAAG+E,IAAI,CAACC,GAAG,CAACjF,UAAU,CAACgK,QAAQ,CAAC/J,KAAK,CAAC,CAAC,GAAI,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,GACrG;kBAAM;oBAAA4I,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAER,CAAC;gBAAA,GA3CE,GAAG/C,MAAM,IAAIH,GAAG,CAAC0E,QAAQ,IAAId,KAAK,EAAE;kBAAAb,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OA4CzC,CACL,CAAC;cAAA,GAzFiB/C,MAAM;gBAAA4C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OA0FX,CAAC;YAErB,CAAC,CAAC,EACDxE,MAAM,CAACC,IAAI,CAACpG,YAAY,CAACmF,YAAY,IAAI,CAAC,CAAC,CAAC,CAACtB,MAAM,KAAK,CAAC,iBACxDvE,OAAA;cAAAiL,QAAA,eACEjL,OAAA;gBAAI8M,OAAO,EAAC,GAAG;gBAAC9B,SAAS,EAAC,qCAAqC;gBAAAC,QAAA,EAAC;cAEhE;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CACL;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACjL,EAAA,CArxBID,cAAc;AAAA4M,EAAA,GAAd5M,cAAc;AAuxBpB,eAAeA,cAAc;AAAC,IAAA4M,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}